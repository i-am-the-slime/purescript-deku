var Uv=function(t){return function(r){for(var e=t.length,n=r.length,u=new Array(e*n),f=0,l=0;l<e;l++)for(var _=t[l],v=0;v<n;v++)u[f++]=_(r[v]);return u}};var Eu={compose:function(t){return function(r){return function(e){return t(r(e))}}}},Mu=function(t){return t.compose},Li=function(t){var r=Mu(t);return function(e){return function(n){return r(n)(e)}}};var Ut=function(t){return t.identity},Wt={identity:function(t){return t},Semigroupoid0:function(){return Eu}};var Ur=!0;var Pi=function(t){return function(r){return function(e){return function(n){return t(r(e))(r(n))}}}},_r=function(t){return function(r){return function(e){return t(e)(r)}}},N=function(t){return function(r){return t}};var Oi=function(t){return function(r){return r(t)}};var Wv=function(t){return function(r){for(var e=r.length,n=new Array(e),u=0;u<e;u++)n[u]=t(r[u]);return n}};var nt=function(){function t(){}return t.value=new t,t}();var R=function(t){return t.map},on=function(t){var r=R(t);return function(e){return function(n){return r(n)(e)}}},ur=function(t){return R(t)(N(void 0))},K=function(t){var r=R(t);return function(e){return function(n){return r(N(n))(e)}}};var iu={map:Mu(Eu)},Dr={map:Wv};var zy=Ut(Wt);var Ri={apply:Uv,Functor0:function(){return Dr}},Gt=function(t){return t.apply};var kr=function(t){var r=Gt(t),e=R(t.Functor0());return function(n){return function(u){return r(e(N(zy))(n))(u)}}},Xr=function(t){var r=Gt(t),e=R(t.Functor0());return function(n){return function(u){return function(f){return r(e(n)(u))(f)}}}};var V=function(t){return t.pure};var ou=function(t){var r=V(t);return function(e){return function(n){if(e)return n;if(!e)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},Ni=function(t){var r=Gt(t.Apply0()),e=V(t);return function(n){return function(u){return r(e(n))(u)}}};var sa={pure:function(t){return[t]},Apply0:function(){return Ri}};var qv=function(t){return function(r){return t+r}},zv=function(t){return function(r){return t.length===0?r:r.length===0?t:t.concat(r)}};var Jr=function(t){return t.reflectSymbol};var fn=function(t){return function(r){return r[t]}},fu=function(t){return function(r){return function(e){var n={};for(var u in e)({}).hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n[t]=r,n}}};var Gv={append:function(t){return function(r){return void 0}}},wu={append:qv};var Kr={append:zv};var at=function(t){return t.append};var Ht=function(t){return t.alt};var Jy=String.fromCharCode(65535),Ky=String.fromCharCode(0),Qy=Number.POSITIVE_INFINITY,Yy=Number.NEGATIVE_INFINITY;var jv=function(t){return function(r){return function(e){return function(n){return function(u){return n<u?t:n===u?r:e}}}}};var Xv=jv;var Jv=jv;var Kv=function(t){return function(r){return t===r}};var Qv=Kv;var Yv=Kv;var Nn={eq:Yv};var Ua={eq:Qv};var Ct=function(t){return t.eq};var ht=function(){function t(){}return t.value=new t,t}(),Lt=function(){function t(){}return t.value=new t,t}(),Pt=function(){function t(){}return t.value=new t,t}();var Zv=function(t){return function(r){return t-r|0}};var ts=function(t){return function(r){return t+r|0}},rs=function(t){return function(r){return t*r|0}},es=function(t){return function(r){return t+r}},ns=function(t){return function(r){return t*r}};var Bi={add:es,zero:0,mul:ns,one:1},ma={add:ts,zero:0,mul:rs,one:1};var Re=function(t){return t.mul};var ue=function(t){return t.add};var jc={sub:Zv,Semiring0:function(){return ma}};var xe=function(){return{compare:Jv(ht.value)(Pt.value)(Lt.value),Eq0:function(){return Nn}}}();var me=function(){return{compare:Xv(ht.value)(Pt.value)(Lt.value),Eq0:function(){return Ua}}}();var Mt=function(t){return t.compare};var Un=function(t){return t.top};var Wi={top:2147483647,bottom:-2147483648,Ord0:function(){return me}};var cu=function(t){return t.bottom};var as=function(t){return t.toString()},is=function(t){var r=t.toString();return isNaN(r+".0")?r:r+".0"};var os=function(t){var r=t.length;return'"'+t.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var u=n+1,f=u<r&&t[u]>="0"&&t[u]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+f})+'"'};var je={show:os};var fs=function(t){return t.showRecordFields},cs=function(){return function(){return function(t){var r=fs(t);return{show:function(e){return"{"+(r(nt.value)(e)+"}")}}}}};var Hi={show:is},kn={show:as};var Dt=function(t){return t.show};var ps=function(t){var r=Jr(t);return function(e){var n=fs(e);return function(u){var f=Dt(u);return{showRecordFields:function(l){return function(_){var v=n(nt.value)(_),k=r(nt.value),T=fn(k)(_);return" "+(k+(": "+(f(T)+(","+v))))}}}}}},ls=function(t){var r=Jr(t);return function(e){var n=Dt(e);return{showRecordFields:function(u){return function(f){var l=r(nt.value),_=fn(l)(f);return" "+(l+(": "+(n(_)+" ")))}}}}};var bg=Ut(Wt),P=function(){function t(){}return t.value=new t,t}(),s=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var rr=function(t){return function(r){return function(e){if(e instanceof P)return t;if(e instanceof s)return r(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}};var Ha=rr(!1)(N(!0));var Fr={map:function(t){return function(r){return r instanceof s?new s(t(r.value0)):P.value}}},Dg=R(Fr);var ie=function(t){return rr(t)(bg)},Ne=function(){return function(t){if(t instanceof s)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var Pu=function(t){var r=Ct(t);return{eq:function(e){return function(n){return e instanceof P&&n instanceof P?!0:e instanceof s&&n instanceof s?r(e.value0)(n.value0):!1}}}},ba=function(t){var r=Mt(t),e=Pu(t.Eq0());return{compare:function(n){return function(u){if(n instanceof P&&u instanceof P)return Pt.value;if(n instanceof P)return ht.value;if(u instanceof P)return Lt.value;if(n instanceof s&&u instanceof s)return r(n.value0)(u.value0);throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): "+[n.constructor.name,u.constructor.name])}},Eq0:function(){return e}}};var Da={apply:function(t){return function(r){if(t instanceof s)return Dg(t.value0)(r);if(t instanceof P)return P.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[t.constructor.name,r.constructor.name])}},Functor0:function(){return Fr}};var de={bind:function(t){return function(r){if(t instanceof s)return r(t.value0);if(t instanceof P)return P.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[t.constructor.name,r.constructor.name])}},Apply0:function(){return Da}};var Hn=function(){return{pure:s.create,Apply0:function(){return Da}}}();var kg={alt:function(t){return function(r){return t instanceof P?r:t}},Functor0:function(){return Fr}},ss=function(){return{empty:P.value,Alt0:function(){return kg}}}();var ms=function(t){return function(r){return function(e){for(var n=r,u=e.length,f=u-1;f>=0;f--)n=t(e[f])(n);return n}}},bs=function(t){return function(r){return function(e){for(var n=r,u=e.length,f=0;f<u;f++)n=t(n)(e[f]);return n}}};var Ds=function(t){return function(r){for(var e=[],n=0,u=t.length;n<u;n++)Array.prototype.push.apply(e,r(t[n]));return e}};var yg=Ut(Wt),qa=function(t){return t.discard};var za={bind:Ds,Apply0:function(){return Ri}},gt=function(t){return t.bind},pu=function(t){return _r(gt(t))},tf=function(t){var r=pu(t);return function(e){return function(n){return function(u){return r(e)(n(u))}}}},rf=function(t){var r=gt(t);return function(e){return function(n){return function(u){return r(e(u))(n)}}}};var Va={discard:function(t){return gt(t)}};var ef=function(t){var r=gt(t);return function(e){return r(e)(yg)}};var A=function(t){return t.empty};var pt=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ct=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var Kc=function(t){return rr(new pt(t))(ct.create)};var ka={map:function(t){return function(r){if(r instanceof pt)return new pt(r.value0);if(r instanceof ct)return new ct(t(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}};var ye=function(t){return function(r){return function(e){if(e instanceof pt)return t(e.value0);if(e instanceof ct)return r(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},Qc=function(){return ye(N(P.value))(s.create)}();var Cg=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}};var ds={defer:function(t){return function(r){return t(void 0)(r)}}},Ga=function(t){return t.defer},Yc=function(t){var r=Ga(t);return function(e){var n=Cg("go","Control.Lazy",function(){return r(function(f){return e(n(25))})}),u=n(25);return u}};var ys=function(t){return function(r){return t&&r}},gs=function(t){return function(r){return t||r}},Ss=function(t){return!t};var Aa=function(t){return t.not};var Xa=function(t){return t.ff};var Ou=function(t){return t.disj},An={ff:!1,tt:!0,implies:function(t){return function(r){return Ou(An)(Aa(An)(t))(r)}},conj:ys,disj:gs,not:Ss};var $s=function(t){return Math.min(Math.abs(t),2147483647)},Cs=function(t){return function(r){return r===0?0:r>0?Math.floor(t/r):-Math.floor(t/-r)}},hs=function(t){return function(r){if(r===0)return 0;var e=Math.abs(r);return(t%e+e)%e}};var Fs={Ring0:function(){return jc}};var zi=function(t){return t.mod};var nf={degree:$s,div:Cs,mod:hs,CommutativeRing0:function(){return Fs}};var uf={mempty:void 0,Semigroup0:function(){return Gv}},Gi={mempty:"",Semigroup0:function(){return wu}};var Vt=function(t){return t.mempty};var X=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var zr=function(t){return t.value1};var Ru={map:function(t){return function(r){return new X(r.value0,t(r.value1))}}};var Nu=function(t){return function(r){return function(e){return t(new X(r,e))}}};var Ki=function(t){return t};var Ng=function(t){var r=Ou(t);return{append:function(e){return function(n){return r(e)(n)}}}};var ep=function(t){var r=Ng(t);return{mempty:Xa(t),Semigroup0:function(){return r}}};var ff=function(t){return t};var Bg=function(t){var r=Mu(t);return{append:function(e){return function(n){return r(e)(n)}}}};var np=function(t){var r=Bg(t.Semigroupoid0());return{mempty:Ut(t),Semigroup0:function(){return r}}};var rt=function(t){return t};var d=function(){return rt};var ap=d(),cf=function(){return ap};var Tr=function(){return ap};var Qa=function(){return function(){return function(){return function(){return function(t){return ap}}}}};var Hg=Tr(),qg=np(Wt);var zg=Qa()()()(),sr=function(t){return t.foldr};var Zi=function(t){var r=sr(t);return function(e){return r(Ht(e.Alt0()))(A(e))}},Lr=function(t){var r=sr(t);return function(e){var n=Ht(e.Alt0()),u=A(e);return function(f){return r(function(l){return n(f(l))})(u)}}},Ya=function(t){var r=kr(t.Apply0()),e=V(t);return function(n){var u=sr(n);return function(f){return u(function(l){return r(f(l))})(e(void 0))}}},Je=function(t){var r=Ya(t);return function(e){return _r(r(e))}};var ar=function(t){return t.foldl};var lu=function(t){var r=ar(t);return function(e){var n=at(e.Semigroup0()),u=Vt(e);return function(f){return function(l){var _=function(v){return function(k){return v.init?{init:!1,acc:k}:{init:!1,acc:n(v.acc)(n(f)(k))}}};return r(_)({init:!0,acc:u})(l).acc}}}};var Ke={foldr:function(t){return function(r){return function(e){if(e instanceof P)return r;if(e instanceof s)return t(e.value0)(r);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof P)return r;if(e instanceof s)return t(r)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name,e.constructor.name])}}},foldMap:function(t){var r=Vt(t);return function(e){return function(n){if(n instanceof P)return r;if(n instanceof s)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var Ms=function(t){var r=sr(t);return function(e){var n=at(e.Semigroup0()),u=Vt(e);return function(f){return r(function(l){return function(_){return n(f(l))(_)}})(u)}}},wt={foldr:ms,foldl:bs,foldMap:function(t){return Ms(wt)(t)}},fp=function(t){var r=ar(t);return function(e){var n=at(e.Semigroup0()),u=Vt(e);return function(f){return r(function(l){return function(_){return n(l)(f(_))}})(u)}}},Ar=function(t){return t.foldMap};var cp=function(t){var r=Ar(t)(qg);return function(e){return function(n){return function(u){return Hg(r(function(f){return ff(e(f))})(u))(n)}}}};var Bu=function(t){var r=Ar(t);return function(e){return zg(Ki)(r(ep(e)))}};var Vg=Ut(Wt);var Ee={dimap:function(t){return function(r){return function(e){return function(n){return r(e(t(n)))}}}}},Za=function(t){return t.dimap},Be=function(t){var r=Za(t);return function(e){return r(e)(Vg)}};var pp=function(t){return function(){return t}},ws=function(t){return function(r){return function(){return r(t())()}}};var Ue=function(t){var r=gt(t.Bind1()),e=V(t.Applicative0());return function(n){return function(u){return r(n)(function(f){return r(u)(function(l){return e(f(l))})})}}};var Is=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},ti={Applicative0:function(){return ge},Bind1:function(){return ga}},ga={bind:ws,Apply0:function(){return lp(0)}},ge={pure:pp,Apply0:function(){return lp(0)}},Ls=Is("functorEffect","Effect",function(){return{map:Ni(ge)}}),lp=Is("applyEffect","Effect",function(){return{apply:Ue(ti),Functor0:function(){return Ls(0)}}}),z=Ls(20),Pr=lp(23),jg=Xr(Pr),_p=function(t){return{append:jg(at(t))}},to=function(t){var r=_p(t.Semigroup0());return{mempty:pp(Vt(t)),Semigroup0:function(){return r}}};var Ps=t=>{for(var r=0,e=t.length;r<e;r++)t[r]()},pf=(t,r)=>{for(var e=0,n=t.length;e<n;e++)r(t[e])},vp=(t,r)=>{for(let e in t)r(t[e])},sp=()=>({}),mp=(t,r,e)=>{e[t]=r},bp=(t,r)=>{delete r[t]};var Os=rt;var Rs=function(t){return function(r){return function(){return t(r())}}},Ns=function(t){return function(){return t}},Bs=function(t){return function(r){return function(){return r(t())()}}};function oe(t){return function(){return{value:t}}}var Qr=function(t){return function(){return t.value}},Us=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},cn=function(t){return function(r){return function(){return r.value=t}}};var gn=function(t){return t};var _u={map:function(t){return function(r){return t(r)}}};var Ws={apply:function(t){return function(r){return t(r)}},Functor0:function(){return _u}},Qg={bind:function(t){return function(r){return r(t)}},Apply0:function(){return Ws}},Hs={pure:gn,Apply0:function(){return Ws}},We={Applicative0:function(){return Hs},Bind1:function(){return Qg}};var qs=function(t){return function(){return{value:t}}};var te=function(t){return function(){return t.value}},zs=function(t){return function(r){return function(){var e=t(r.value);return r.value=e.state,e.value}}},Se=function(t){return function(r){return function(){r.value=t}}};var Zg=ur(z),$e=qs,tS=zs,lf=function(t){return tS(function(r){var e=t(r);return{state:e,value:e}})},ro=function(t){return function(r){return Zg(lf(t)(r))}};var iS=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},oS=Us,xr=function(t){return oS(function(r){var e=t(r);return{state:e,value:e}})},fe={map:Rs};var kp={Applicative0:function(){return Sr},Bind1:function(){return Uu}},Uu={bind:Bs,Apply0:function(){return Ap(0)}},Sr={pure:Ns,Apply0:function(){return Ap(0)}},Ap=iS("applyST","Control.Monad.ST.Internal",function(){return{apply:Ue(kp),Functor0:function(){return fe}}}),eo=Ap(47),fS=Xr(eo);var Gs=function(t){return{append:fS(at(t))}};var ri={liftST:Os,Monad0:function(){return ti}},ei=function(t){return t.liftST};var cS=function(t){return function(r){if(t<1)return[];var e=new Array(t);return e.fill(r)}},pS=function(t){return function(r){for(var e=[],n=0,u=0;u<t;u++)e[n++]=r;return e}},dp=typeof Array.prototype.fill=="function"?cS:pS,lS=function(){function t(u,f){this.head=u,this.tail=f}var r={};function e(u){return function(f){return new t(u,f)}}function n(u){for(var f=[],l=0,_=u;_!==r;)f[l++]=_.head,_=_.tail;return f}return function(u){return function(f){return n(u(e)(r)(f))}}}(),qn=function(t){return t.length},js=function(t){return function(r){return function(e){return e.length===0?t({}):r(e[0])(e.slice(1))}}},Xs=function(t){return function(r){return function(e){return function(n){return n<0||n>=e.length?r:t(e[n])}}}},Js=function(t){return function(r){return function(e){return function(n){for(var u=0;u<n.length;u++){var f=e(n[u]);if(r(f))return f}return t}}}},Ks=function(t){return function(r){return function(e){return function(n){for(var u=0,f=n.length;u<f;u++)if(e(n[u]))return t(u);return r}}}};var Qs=function(t){return function(r){return function(e){return function(n){if(e<0||e>=n.length)return r;var u=n.slice();return u.splice(e,1),t(u)}}}};var no=function(t){return function(r){return r.filter(t)}},vf=function(t){return function(r){for(var e=[],n=[],u=0;u<r.length;u++){var f=r[u];t(f)?e.push(f):n.push(f)}return{yes:e,no:n}}};var Ys=function(){function t(r,e,n,u,f,l){var _,v,k,T,O,H,W;for(_=f+(l-f>>1),_-f>1&&t(r,e,u,n,f,_),l-_>1&&t(r,e,u,n,_,l),v=f,k=_,T=f;v<_&&k<l;)O=u[v],H=u[k],W=e(r(O)(H)),W>0?(n[T++]=H,++k):(n[T++]=O,++v);for(;v<_;)n[T++]=u[v++];for(;k<l;)n[T++]=u[k++]}return function(r){return function(e){return function(n){var u;return n.length<2?n:(u=n.slice(0),t(r,e,u,n.slice(0),0,n.length),u)}}}}();var Zs=function(t){return function(r){return t[r]}};function Cn(){return[]}var yp=function(t){return function(r){return function(){return r.push.apply(r,t)}}};var sf=function(t){return function(r){return function(e){return function(n){return function(){return n.splice.apply(n,[t,r].concat(e))}}}}},zn=function(t){return function(){return t}};function tm(t){return function(){return t.slice()}}var uo=tm,gp=tm,vS=function(){function t(r,e,n,u,f,l){var _,v,k,T,O,H,W;for(_=f+(l-f>>1),_-f>1&&t(r,e,u,n,f,_),l-_>1&&t(r,e,u,n,_,l),v=f,k=_,T=f;v<_&&k<l;)O=u[v],H=u[k],W=e(r(O)(H)),W>0?(n[T++]=H,++k):(n[T++]=O,++v);for(;v<_;)n[T++]=u[v++];for(;k<l;)n[T++]=u[k++]}return function(r){return function(e){return function(n){return function(){return n.length<2||t(r,e,n,n.slice(0),0,n.length),n}}}}}();var um=function(t){return function(r){return function(){var n=gp(r)();return t(n)(),zn(n)()}}};var Ye=function(t){return yp([t])};var am=R(fe),bS=Aa(An),DS=ur(fe),kS=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var AS=function(t){return function(){var e=Qr(t.value1)();return xr(function(n){return n+1|0})(t.value1)(),t.value0(e)}};var bf=function(t){return am(kS.create(t))(oe(0))},Df=function(t){return function(r){return function(){for(var n=oe(!1)();am(bS)(Qr(n))();)(function(){var f=AS(t)();if(f instanceof s)return r(f.value0)();if(f instanceof P)return DS(cn(!0)(n))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[f.constructor.name])})();return{}}}};var om=function(t){return function(r){for(var e=r.length,n=Array(e),u=0;u<e;u++)n[u]=t(u)(r[u]);return n}};var pn=function(t){return t.mapWithIndex};var vu={mapWithIndex:om,Functor0:function(){return Dr}};var pm=function(){function t(u){return[u]}function r(u){return function(f){return[u,f]}}function e(u){return function(f){return function(l){return[u,f,l]}}}function n(u){return function(f){return u.concat(f)}}return function(u){return function(f){return function(l){return function(_){return function(v){function k(T,O){switch(O-T){case 0:return l([]);case 1:return f(t)(_(v[T]));case 2:return u(f(r)(_(v[T])))(_(v[T+1]));case 3:return u(u(f(e)(_(v[T])))(_(v[T+1])))(_(v[T+2]));default:var H=T+Math.floor((O-T)/4)*2;return u(f(n)(k(T,H)))(k(H,O))}}return k(0,v.length)}}}}}}();var ZS=Ut(Wt),qe=function(t){return t.traverse};var xp=function(t){var r=qe(t);return function(e){return r(e)(ZS)}},Sa={traverse:function(t){var r=t.Apply0();return pm(Gt(r))(R(r.Functor0()))(V(t))},sequence:function(t){return xp(Sa)(t)},Functor0:function(){return Dr},Foldable1:function(){return wt}};var b$=R(Fr);var D$=Ne();var k$=at(Kr);var Pp=function(){return Zs},A$=Pp(),Op=function(){return js(N(P.value))(function(t){return function(r){return new s({head:t,tail:r})}})}();var Sf=function(t){return Ys(t)(function(r){if(r instanceof Lt)return 1;if(r instanceof Pt)return 0;if(r instanceof ht)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[r.constructor.name])})};var $f=function(t){return function(r){return um(Ye(r))(t)()}},dm=function(t){return[t]};var h=pn(vu);var Hu=function(){return Xs(s.create)(P.value)}(),Rp=function(t){return Hu(t)(qn(t)-1|0)};var Np=function(t){return Hu(t)(0)};var fo=function(){return Js(P.value)(Ha)}();var Bp=function(){return Ks(s.create)(P.value)}();var Up=function(t){return function(r){return b$(A$(r))(Bp(t)(r))}};var ym=function(){return Qs(s.create)(P.value)}(),Wp=function(t){return function(r){return function(e){return e.length===0?[]:rr(e)(function(n){return D$(ym(n)(e))})(Bp(t(r))(e))}}};var co=function(t){return function(r){return k$([t])(r)}};var d$=_r(gt(za)),Hp=function(t){return d$(function(){var r=rr([])(dm);return function(e){return r(t(e))}}())};var Gn=function(t){return t.foldrWithIndex};var jn=function(t){return t.foldlWithIndex};var su=function(t){return t.foldMapWithIndex};var Xn=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();var hf=function(t){var r=A(t);return function(e){return new Xn(e,r)}};var er=function(){function t(){}return t.value=new t,t}(),dt=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),Ff=function(t){return t},w$=function(t){return new dt(t.value0,t.value1)};var I$=function(t){var r=function(e){return function(n){var u=e,f=!1,l;function _(v,k){if(k instanceof dt&&k.value1 instanceof dt&&k.value1.value1 instanceof dt){u=new dt(k,v),n=k.value1.value1.value1;return}var T=function(H){return H instanceof dt&&H.value1 instanceof dt&&H.value1.value1 instanceof er?new dt(t(H.value0),new dt(t(H.value1.value0),er.value)):H instanceof dt&&H.value1 instanceof er?new dt(t(H.value0),er.value):er.value},O=function(H){return function(W){var p=H,m=!1,Q;function ot(Z,tr){if(Z instanceof dt&&Z.value0 instanceof dt&&Z.value0.value1 instanceof dt&&Z.value0.value1.value1 instanceof dt){p=Z.value1,W=new dt(t(Z.value0.value0),new dt(t(Z.value0.value1.value0),new dt(t(Z.value0.value1.value1.value0),tr)));return}return m=!0,tr}for(;!m;)Q=ot(p,W);return Q}};return f=!0,O(v)(T(k))}for(;!f;)l=_(u,n);return l}};return r(er.value)},po={map:I$};var ln={foldr:function(t){return function(r){var e=function(){var u=function(f){return function(l){var _=f,v=!1,k;function T(O,H){if(H instanceof er)return v=!0,O;if(H instanceof dt){_=new dt(H.value0,O),l=H.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[O.constructor.name,H.constructor.name])}for(;!v;)k=T(_,l);return k}};return u(er.value)}(),n=ar(ln)(_r(t))(r);return function(u){return n(e(u))}}},foldl:function(t){var r=function(e){return function(n){var u=e,f=!1,l;function _(v,k){if(k instanceof er)return f=!0,v;if(k instanceof dt){u=t(v)(k.value0),n=k.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[k.constructor.name])}for(;!f;)l=_(u,n);return l}};return r},foldMap:function(t){var r=at(t.Semigroup0()),e=Vt(t);return function(n){return ar(ln)(function(u){var f=r(u);return function(l){return f(n(l))}})(e)}}};var L$=sr(ln);var Tf={append:function(t){return function(r){return L$(dt.create)(r)(t)}}},$m=at(Tf);var Cm={append:function(t){return function(r){return new Xn(t.value0,$m(t.value1)(w$(r)))}}};var hm={alt:$m,Functor0:function(){return po}},zp=function(){return{empty:er.value,Alt0:function(){return hm}}}();var xf=function(){var t=function(r){return function(e){var n=r,u=!1,f;function l(_,v){if(v instanceof er)return u=!0,_;if(v instanceof dt){n=new dt(v.value0,_),e=v.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[_.constructor.name,v.constructor.name])}for(;!u;)f=l(n,e);return f}};return t(er.value)}();var wm=function(t){return t()};var Im=function(t){throw new Error(t)};var Lm=function(){return Im};var tC=Lm(),rC=wm,Vu=function(t){return rC(function(){return tC(t)})};var mt=function(){function t(){}return t.value=new t,t}(),Ft=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}(),Jt=function(){function t(r,e,n,u,f,l,_){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l,this.value6=_}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return function(_){return new t(r,e,n,u,f,l,_)}}}}}}},t}(),Gu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),mu=function(){function t(r,e,n){this.value0=r,this.value1=e,this.value2=n}return t.create=function(r){return function(e){return function(n){return new t(r,e,n)}}},t}(),ju=function(){function t(r,e,n,u,f,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return new t(r,e,n,u,f,l)}}}}}},t}(),Jn=function(){function t(r,e,n,u,f,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return new t(r,e,n,u,f,l)}}}}}},t}(),Xu=function(){function t(r,e,n,u,f,l){this.value0=r,this.value1=e,this.value2=n,this.value3=u,this.value4=f,this.value5=l}return t.create=function(r){return function(e){return function(n){return function(u){return function(f){return function(l){return new t(r,e,n,u,f,l)}}}}}},t}(),Mf=function(){function t(r,e,n,u){this.value0=r,this.value1=e,this.value2=n,this.value3=u}return t.create=function(r){return function(e){return function(n){return function(u){return new t(r,e,n,u)}}}},t}();var Nm=function(t){return function(r){return new Ft(mt.value,t,r,mt.value)}};var _o=function(t){var r=Mt(t);return function(e){var n=function(u){var f=!1,l;function _(v){if(v instanceof mt)return f=!0,P.value;if(v instanceof Ft){var k=r(e)(v.value1);if(k instanceof Pt)return f=!0,new s(v.value2);if(k instanceof ht){u=v.value0;return}u=v.value3;return}if(v instanceof Jt){var T=r(e)(v.value1);if(T instanceof Pt)return f=!0,new s(v.value2);var O=r(e)(v.value4);if(O instanceof Pt)return f=!0,new s(v.value5);if(T instanceof ht){u=v.value0;return}if(O instanceof Lt){u=v.value6;return}u=v.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[v.constructor.name])}for(;!f;)l=_(u);return l};return n}};var Ju={map:function(t){return function(r){if(r instanceof mt)return mt.value;if(r instanceof Ft)return new Ft(R(Ju)(t)(r.value0),r.value1,t(r.value2),R(Ju)(t)(r.value3));if(r instanceof Jt)return new Jt(R(Ju)(t)(r.value0),r.value1,t(r.value2),R(Ju)(t)(r.value3),r.value4,t(r.value5),R(Ju)(t)(r.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 116, column 1 - line 119, column 110): "+[t.constructor.name,r.constructor.name])}}};var Bm=function(t){return function(r){return function(e){var n=t,u=r,f=!1,l;function _(v,k,T){if(k instanceof er)return f=!0,T;if(k instanceof dt){if(k.value0 instanceof Gu){n=v,u=k.value1,e=new Ft(T,k.value0.value0,k.value0.value1,k.value0.value2);return}if(k.value0 instanceof mu){n=v,u=k.value1,e=new Ft(k.value0.value0,k.value0.value1,k.value0.value2,T);return}if(k.value0 instanceof ju){n=v,u=k.value1,e=new Jt(T,k.value0.value0,k.value0.value1,k.value0.value2,k.value0.value3,k.value0.value4,k.value0.value5);return}if(k.value0 instanceof Jn){n=v,u=k.value1,e=new Jt(k.value0.value0,k.value0.value1,k.value0.value2,T,k.value0.value3,k.value0.value4,k.value0.value5);return}if(k.value0 instanceof Xu){n=v,u=k.value1,e=new Jt(k.value0.value0,k.value0.value1,k.value0.value2,k.value0.value3,k.value0.value4,k.value0.value5,T);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[k.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[k.constructor.name,T.constructor.name])}for(;!f;)l=_(n,u,e);return l}}},If=function(t){var r=Bm(t),e=Mt(t);return function(n){return function(u){var f=function(_){return function(v){var k=_,T=!1,O;function H(W,p){if(W instanceof er)return T=!0,new Ft(p.value0,p.value1,p.value2,p.value3);if(W instanceof dt){if(W.value0 instanceof Gu)return T=!0,r(W.value1)(new Jt(p.value0,p.value1,p.value2,p.value3,W.value0.value0,W.value0.value1,W.value0.value2));if(W.value0 instanceof mu)return T=!0,r(W.value1)(new Jt(W.value0.value0,W.value0.value1,W.value0.value2,p.value0,p.value1,p.value2,p.value3));if(W.value0 instanceof ju){k=W.value1,v=new Mf(new Ft(p.value0,p.value1,p.value2,p.value3),W.value0.value0,W.value0.value1,new Ft(W.value0.value2,W.value0.value3,W.value0.value4,W.value0.value5));return}if(W.value0 instanceof Jn){k=W.value1,v=new Mf(new Ft(W.value0.value0,W.value0.value1,W.value0.value2,p.value0),p.value1,p.value2,new Ft(p.value3,W.value0.value3,W.value0.value4,W.value0.value5));return}if(W.value0 instanceof Xu){k=W.value1,v=new Mf(new Ft(W.value0.value0,W.value0.value1,W.value0.value2,W.value0.value3),W.value0.value4,W.value0.value5,new Ft(p.value0,p.value1,p.value2,p.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[W.value0.constructor.name,p.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[W.constructor.name,p.constructor.name])}for(;!T;)O=H(k,v);return O}},l=function(_){return function(v){var k=_,T=!1,O;function H(W,p){if(p instanceof mt)return T=!0,f(W)(new Mf(mt.value,n,u,mt.value));if(p instanceof Ft){var m=e(n)(p.value1);if(m instanceof Pt)return T=!0,r(W)(new Ft(p.value0,n,u,p.value3));if(m instanceof ht){k=new dt(new Gu(p.value1,p.value2,p.value3),W),v=p.value0;return}k=new dt(new mu(p.value0,p.value1,p.value2),W),v=p.value3;return}if(p instanceof Jt){var m=e(n)(p.value1);if(m instanceof Pt)return T=!0,r(W)(new Jt(p.value0,n,u,p.value3,p.value4,p.value5,p.value6));var Q=e(n)(p.value4);if(Q instanceof Pt)return T=!0,r(W)(new Jt(p.value0,p.value1,p.value2,p.value3,n,u,p.value6));if(m instanceof ht){k=new dt(new ju(p.value1,p.value2,p.value3,p.value4,p.value5,p.value6),W),v=p.value0;return}if(m instanceof Lt&&Q instanceof ht){k=new dt(new Jn(p.value0,p.value1,p.value2,p.value4,p.value5,p.value6),W),v=p.value3;return}k=new dt(new Xu(p.value0,p.value1,p.value2,p.value3,p.value4,p.value5),W),v=p.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[W.constructor.name,p.constructor.name])}for(;!T;)O=H(k,v);return O}};return l(er.value)}}},oC=function(t){var r=Bm(t),e=Mt(t);return function(n){var u=function(v){return function(k){var T=v,O=!1,H;function W(p,m){if(p instanceof er)return O=!0,m;if(p instanceof dt){if(p.value0 instanceof Gu&&p.value0.value2 instanceof mt&&m instanceof mt)return O=!0,r(p.value1)(new Ft(mt.value,p.value0.value0,p.value0.value1,mt.value));if(p.value0 instanceof mu&&p.value0.value0 instanceof mt&&m instanceof mt)return O=!0,r(p.value1)(new Ft(mt.value,p.value0.value1,p.value0.value2,mt.value));if(p.value0 instanceof Gu&&p.value0.value2 instanceof Ft){T=p.value1,k=new Jt(m,p.value0.value0,p.value0.value1,p.value0.value2.value0,p.value0.value2.value1,p.value0.value2.value2,p.value0.value2.value3);return}if(p.value0 instanceof mu&&p.value0.value0 instanceof Ft){T=p.value1,k=new Jt(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3,p.value0.value1,p.value0.value2,m);return}return p.value0 instanceof Gu&&p.value0.value2 instanceof Jt?(O=!0,r(p.value1)(new Ft(new Ft(m,p.value0.value0,p.value0.value1,p.value0.value2.value0),p.value0.value2.value1,p.value0.value2.value2,new Ft(p.value0.value2.value3,p.value0.value2.value4,p.value0.value2.value5,p.value0.value2.value6)))):p.value0 instanceof mu&&p.value0.value0 instanceof Jt?(O=!0,r(p.value1)(new Ft(new Ft(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3),p.value0.value0.value4,p.value0.value0.value5,new Ft(p.value0.value0.value6,p.value0.value1,p.value0.value2,m)))):p.value0 instanceof ju&&p.value0.value2 instanceof mt&&p.value0.value5 instanceof mt&&m instanceof mt?(O=!0,r(p.value1)(new Jt(mt.value,p.value0.value0,p.value0.value1,mt.value,p.value0.value3,p.value0.value4,mt.value))):p.value0 instanceof Jn&&p.value0.value0 instanceof mt&&p.value0.value5 instanceof mt&&m instanceof mt?(O=!0,r(p.value1)(new Jt(mt.value,p.value0.value1,p.value0.value2,mt.value,p.value0.value3,p.value0.value4,mt.value))):p.value0 instanceof Xu&&p.value0.value0 instanceof mt&&p.value0.value3 instanceof mt&&m instanceof mt?(O=!0,r(p.value1)(new Jt(mt.value,p.value0.value1,p.value0.value2,mt.value,p.value0.value4,p.value0.value5,mt.value))):p.value0 instanceof ju&&p.value0.value2 instanceof Ft?(O=!0,r(p.value1)(new Ft(new Jt(m,p.value0.value0,p.value0.value1,p.value0.value2.value0,p.value0.value2.value1,p.value0.value2.value2,p.value0.value2.value3),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof Jn&&p.value0.value0 instanceof Ft?(O=!0,r(p.value1)(new Ft(new Jt(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3,p.value0.value1,p.value0.value2,m),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof Jn&&p.value0.value5 instanceof Ft?(O=!0,r(p.value1)(new Ft(p.value0.value0,p.value0.value1,p.value0.value2,new Jt(m,p.value0.value3,p.value0.value4,p.value0.value5.value0,p.value0.value5.value1,p.value0.value5.value2,p.value0.value5.value3)))):p.value0 instanceof Xu&&p.value0.value3 instanceof Ft?(O=!0,r(p.value1)(new Ft(p.value0.value0,p.value0.value1,p.value0.value2,new Jt(p.value0.value3.value0,p.value0.value3.value1,p.value0.value3.value2,p.value0.value3.value3,p.value0.value4,p.value0.value5,m)))):p.value0 instanceof ju&&p.value0.value2 instanceof Jt?(O=!0,r(p.value1)(new Jt(new Ft(m,p.value0.value0,p.value0.value1,p.value0.value2.value0),p.value0.value2.value1,p.value0.value2.value2,new Ft(p.value0.value2.value3,p.value0.value2.value4,p.value0.value2.value5,p.value0.value2.value6),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof Jn&&p.value0.value0 instanceof Jt?(O=!0,r(p.value1)(new Jt(new Ft(p.value0.value0.value0,p.value0.value0.value1,p.value0.value0.value2,p.value0.value0.value3),p.value0.value0.value4,p.value0.value0.value5,new Ft(p.value0.value0.value6,p.value0.value1,p.value0.value2,m),p.value0.value3,p.value0.value4,p.value0.value5))):p.value0 instanceof Jn&&p.value0.value5 instanceof Jt?(O=!0,r(p.value1)(new Jt(p.value0.value0,p.value0.value1,p.value0.value2,new Ft(m,p.value0.value3,p.value0.value4,p.value0.value5.value0),p.value0.value5.value1,p.value0.value5.value2,new Ft(p.value0.value5.value3,p.value0.value5.value4,p.value0.value5.value5,p.value0.value5.value6)))):p.value0 instanceof Xu&&p.value0.value3 instanceof Jt?(O=!0,r(p.value1)(new Jt(p.value0.value0,p.value0.value1,p.value0.value2,new Ft(p.value0.value3.value0,p.value0.value3.value1,p.value0.value3.value2,p.value0.value3.value3),p.value0.value3.value4,p.value0.value3.value5,new Ft(p.value0.value3.value6,p.value0.value4,p.value0.value5,m)))):(O=!0,Vu("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[p.constructor.name])}for(;!O;)H=W(T,k);return H}},f=function(v){return function(k){var T=v,O=!1,H;function W(p,m){if(m instanceof Ft&&m.value0 instanceof mt&&m.value3 instanceof mt)return O=!0,u(p)(mt.value);if(m instanceof Ft){T=new dt(new mu(m.value0,m.value1,m.value2),p),k=m.value3;return}if(m instanceof Jt&&m.value0 instanceof mt&&m.value3 instanceof mt&&m.value6 instanceof mt)return O=!0,u(new dt(new mu(mt.value,m.value1,m.value2),p))(mt.value);if(m instanceof Jt){T=new dt(new Xu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),p),k=m.value6;return}return O=!0,Vu("The impossible happened in partial function `removeMaxNode`.")}for(;!O;)H=W(T,k);return H}},l=function(v){var k=!1,T;function O(H){if(H instanceof Ft&&H.value3 instanceof mt)return k=!0,{key:H.value1,value:H.value2};if(H instanceof Ft){v=H.value3;return}if(H instanceof Jt&&H.value6 instanceof mt)return k=!0,{key:H.value4,value:H.value5};if(H instanceof Jt){v=H.value6;return}return k=!0,Vu("The impossible happened in partial function `maxNode`.")}for(;!k;)T=O(v);return T},_=function(v){return function(k){var T=v,O=!1,H;function W(p,m){if(m instanceof mt)return O=!0,P.value;if(m instanceof Ft){var Q=e(n)(m.value1);if(m.value3 instanceof mt&&Q instanceof Pt)return O=!0,new s(new X(m.value2,u(p)(mt.value)));if(Q instanceof Pt){var ot=l(m.value0);return O=!0,new s(new X(m.value2,f(new dt(new Gu(ot.key,ot.value,m.value3),p))(m.value0)))}if(Q instanceof ht){T=new dt(new Gu(m.value1,m.value2,m.value3),p),k=m.value0;return}T=new dt(new mu(m.value0,m.value1,m.value2),p),k=m.value3;return}if(m instanceof Jt){var Z=function(){return m.value0 instanceof mt&&m.value3 instanceof mt&&m.value6 instanceof mt}(),Q=e(n)(m.value4),tr=e(n)(m.value1);if(Z&&tr instanceof Pt)return O=!0,new s(new X(m.value2,r(p)(new Ft(mt.value,m.value4,m.value5,mt.value))));if(Z&&Q instanceof Pt)return O=!0,new s(new X(m.value5,r(p)(new Ft(mt.value,m.value1,m.value2,mt.value))));if(tr instanceof Pt){var ot=l(m.value0);return O=!0,new s(new X(m.value2,f(new dt(new ju(ot.key,ot.value,m.value3,m.value4,m.value5,m.value6),p))(m.value0)))}if(Q instanceof Pt){var ot=l(m.value3);return O=!0,new s(new X(m.value5,f(new dt(new Jn(m.value0,m.value1,m.value2,ot.key,ot.value,m.value6),p))(m.value3)))}if(tr instanceof ht){T=new dt(new ju(m.value1,m.value2,m.value3,m.value4,m.value5,m.value6),p),k=m.value0;return}if(tr instanceof Lt&&Q instanceof ht){T=new dt(new Jn(m.value0,m.value1,m.value2,m.value4,m.value5,m.value6),p),k=m.value3;return}T=new dt(new Xu(m.value0,m.value1,m.value2,m.value3,m.value4,m.value5),p),k=m.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[m.constructor.name])}for(;!O;)H=W(T,k);return H}};return _(er.value)}},pe={foldr:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return sr(pe)(t)(t(e.value2)(sr(pe)(t)(r)(e.value3)))(e.value0);if(e instanceof Jt)return sr(pe)(t)(t(e.value2)(sr(pe)(t)(t(e.value5)(sr(pe)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[e.constructor.name])}}},foldl:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return ar(pe)(t)(t(ar(pe)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Jt)return ar(pe)(t)(t(ar(pe)(t)(t(ar(pe)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[e.constructor.name])}}},foldMap:function(t){var r=Vt(t),e=at(t.Semigroup0());return function(n){return function(u){if(u instanceof mt)return r;if(u instanceof Ft)return e(Ar(pe)(t)(n)(u.value0))(e(n(u.value2))(Ar(pe)(t)(n)(u.value3)));if(u instanceof Jt)return e(Ar(pe)(t)(n)(u.value0))(e(n(u.value2))(e(Ar(pe)(t)(n)(u.value3))(e(n(u.value5))(Ar(pe)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[u.constructor.name])}}}},be={foldrWithIndex:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return Gn(be)(t)(t(e.value1)(e.value2)(Gn(be)(t)(r)(e.value3)))(e.value0);if(e instanceof Jt)return Gn(be)(t)(t(e.value1)(e.value2)(Gn(be)(t)(t(e.value4)(e.value5)(Gn(be)(t)(r)(e.value6)))(e.value3)))(e.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[e.constructor.name])}}},foldlWithIndex:function(t){return function(r){return function(e){if(e instanceof mt)return r;if(e instanceof Ft)return jn(be)(t)(t(e.value1)(jn(be)(t)(r)(e.value0))(e.value2))(e.value3);if(e instanceof Jt)return jn(be)(t)(t(e.value4)(jn(be)(t)(t(e.value1)(jn(be)(t)(r)(e.value0))(e.value2))(e.value3))(e.value5))(e.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[e.constructor.name])}}},foldMapWithIndex:function(t){var r=Vt(t),e=at(t.Semigroup0());return function(n){return function(u){if(u instanceof mt)return r;if(u instanceof Ft)return e(su(be)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(su(be)(t)(n)(u.value3)));if(u instanceof Jt)return e(su(be)(t)(n)(u.value0))(e(n(u.value1)(u.value2))(e(su(be)(t)(n)(u.value3))(e(n(u.value4)(u.value5))(su(be)(t)(n)(u.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[u.constructor.name])}}},Foldable0:function(){return pe}},fC=Gn(be),cC=jn(be),Um=function(){return fC(function(t){return function(r){return function(e){return new dt(t,e)}}})(er.value)}();var bu=function(){return mt.value}();var Kp=function(t){var r=oC(t);return function(e){return function(n){return rr(n)(zr)(r(e)(n))}}};var Ku=function(t){var r=_o(t),e=Kp(t),n=If(t);return function(u){return function(f){return function(l){var _=u(r(f)(l));if(_ instanceof P)return e(f)(l);if(_ instanceof s)return n(f)(_.value0)(l);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[_.constructor.name])}}}};var pC=function(t){var r=Ku(t);return function(e){return function(n){return function(u){var f=function(l){return function(_){return function(v){return r(function(){var k=rr(v)(e(v));return function(T){return s.create(k(T))}}())(l)(_)}}};return cC(f)(u)(n)}}}};var Wm=function(t){return pC(t)(N)};var Hm=ur(fe),vC=V(Sr),sC=Gt(eo),mC=R(fe);var Lf={compact:function(t){return function(){var e=Cn(),n=bf(function(u){return Hu(t)(u)})();return Df(n)(function(u){return Hm(function(f){if(f instanceof P)return vC(0);if(f instanceof s)return Ye(f.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[f.constructor.name])}(u))})(),zn(e)()}()},separate:function(t){return function(){var e=Cn(),n=Cn(),u=bf(function(f){return Hu(t)(f)})();return Df(u)(function(f){return Hm(function(l){if(l instanceof pt)return Ye(l.value0)(e);if(l instanceof ct)return Ye(l.value0)(n);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[l.constructor.name])}(f))})(),sC(mC(function(f){return function(l){return{left:f,right:l}}})(zn(e)))(zn(n))()}()}};var Du=function(t){return t.compact};var qm=at(Kr),AC=ar(wt);var zm={partitionMap:function(t){var r=function(e){return function(n){var u=t(n);if(u instanceof pt)return{left:qm(e.left)([u.value0]),right:e.right};if(u instanceof ct)return{right:qm(e.right)([u.value0]),left:e.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[u.constructor.name])}};return AC(r)({left:[],right:[]})},partition:vf,filterMap:Hp,filter:no,Compactable0:function(){return Lf},Functor1:function(){return Dr}};var Ze=function(t){return t.filterMap};var Qp=function(t){return t.filter};var yC=Ar(ln),gC=ar(ln),SC=sr(ln);var $C=function(t){var r=Wm(t);return function(e){return function(n){return r(e)(n)}}};var Yp=function(t){return Um(t)};var Gm=function(t){return Nm(t)(void 0)};var Zp=function(t){return{append:$C(t)}};var jm={foldMap:function(t){var r=yC(t);return function(e){var n=r(e);return function(u){return n(Yp(u))}}},foldl:function(t){return function(r){var e=gC(t)(r);return function(n){return e(Yp(n))}}},foldr:function(t){return function(r){var e=SC(t)(r);return function(n){return e(Yp(n))}}}};var CC=bu;var Xm=function(t){var r=Zp(t);return{mempty:CC,Semigroup0:function(){return r}}};var Jm=function(t){var r=Kp(t);return function(e){return function(n){return r(e)(n)}}};function Km(t){return function(r){return function(){return setTimeout(r,t)}}}function Qm(t){return function(){clearTimeout(t)}}var TC=Mt(me);var Ym=Km;var xC={eq:function(t){return function(r){return t===r}}},Pf={compare:function(t){return function(r){return TC(t)(r)}},Eq0:function(){return xC}};var Zm=Qm;var ku=function(r){return function(e){return r(e)()}};var ai=function(r){return function(e){return function(){return r(e)}}};var GC=function(t){var r=at(_p(t));return{append:function(e){return function(n){return ku(function(u){return r(ai(e)(u))(ai(n)(u))})}}}};var nb=function(t){var r=Vt(to(t)),e=GC(t.Semigroup0());return{mempty:ku(function(n){return r}),Semigroup0:function(){return e}}};var jC=R(Ru),XC=V(Hn),ab=function(t){return t.sampleOnRight};var xa=function(t){return t.keepLatest};var ib=function(t){return t.fix},Qu=function(t){var r=ib(t),e=ab(t),n=t.Alternative0(),u=Ht(n.Plus1().Alt0()),f=V(n.Applicative0()),l=R(t.Filterable1().Functor1());return function(_){return function(v){return function(k){return r(function(T){return e(u(T)(f(v)))(l(_r(_))(k))})}}}};var Yu=function(t){var r=Ze(t.Filterable1()),e=Qu(t);return function(n){return function(u){return function(f){return r(zr)(e(function(l){return function(_){return jC(XC)(n(l.value0)(_))}})(new X(u,P.value))(f))}}}};function rl(t){return function(r){return t===r}}var ob=rl;var cb=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},pb=Je(ge),Rf=pb(Ke),Ea=V(ge),xn=ei(ri),QC=to(uf),bo=ur(z),YC=at(Kr),lb=Vt(nb(uf)),ZC=Vt(Xm(Pf)),th=Jm(Pf),rh=at(Zp(Pf)),eh=pb(jm),nh=Gt(Pr),uh=R(z);var ah=function(t){return function(r){return function(e,n){var u=$e(P.value)(),f=t(e,function(_){return Se(new s(_))(u)()}),l=r(e,function(_){var v=te(u)();return Rf(v)(function(k){return function(){return n(_(k))}})()});return function(){return f(),l()}}}},ih=function(t){return function(r){return function(e,n){var u=$e(P.value)(),f=t(e,function(_){var v=te(u)();return Rf(v)(function(k){return function(){return n(k(_))}})()}),l=r(e,function(_){return Se(new s(_))(u)()});return function(){return f(),l()}}}},ii=function(t){var r=Ar(t)(QC);return function(e){return function(n,u){var f=xn(Cn)();return r(function(l){return function(){var v=l(n,u);return bo(xn(Ye(v)(f)))()}})(e)(),function(){var _=xn(uo(f))();return Ps(_)}}}},fb=function(t){var r=Ku(t),e=_o(t);return function(){var u=$e(bu)();return{event:function(f){return function(l,_){return bo(lf(r(function(v){if(v instanceof P)return new s([_]);if(v instanceof s)return new s(YC(v.value0)([_]));throw new Error("Failed pattern match at FRP.Event (line 568, column 17 - line 570, column 51): "+[v.constructor.name])})(f))(u))(),bo(lf(r(function(v){if(v instanceof P)return P.value;if(v instanceof s)return new s(Wp(ob)(_)(v.value0));throw new Error("Failed pattern match at FRP.Event (line 577, column 17 - line 579, column 65): "+[v.constructor.name])})(f))(u))}},push:function(f){var l=te(u)(),_=e(f.address)(l);if(_ instanceof P)return void 0;if(_ instanceof s)return pf(_.value0,function(v){return v(f.payload)});throw new Error("Failed pattern match at FRP.Event (line 586, column 9 - line 588, column 95): "+[_.constructor.name])}}}},oh=function(t){return function(r,e){var n=$e(Ea(void 0))(),u=t(r,function(f){var l=te(n)();l();var _=f(r,e);return Se(_)(n)()});return function(){var l=te(n)();return l(),u()}}},Er={map:function(t){return function(r){return function(e,n){return r(e,function(u){return n(t(u))})}}}},fh=R(Er),mo=function(t){return function(r){return function(e,n){return r(e,function(u){var f=t(u);if(f instanceof s)return n(f.value0);if(f instanceof P)return void 0;throw new Error("Failed pattern match at FRP.Event (line 225, column 31 - line 227, column 35): "+[f.constructor.name])})}}},el=function(t){return mo(function(r){var e=t(r);if(e)return new s(r);if(!e)return P.value;throw new Error("Failed pattern match at FRP.Event (line 141, column 13 - line 143, column 25): "+[e.constructor.name])})},Of=function(){var r=sp(),e=$e(0)();return{event:function(n,u){var f=$e(u)(),l=te(e)();return mp(l,f,r),ro(function(_){return _+1|0})(e)(),function(){return Se(lb)(f)(),bp(l,r),void 0}},push:function(n){return vp(r,function(u){var f=te(u)();return f(n)})}}},ch=function(t){return function(r,e){var n=Of(),u=t(n.event),f=n.event(r,e),l=u(r,n.push);return function(){return l(),f()}}},Do={compact:mo(Ut(Wt)),separate:function(t){return{left:mo(function(r){if(r instanceof pt)return new s(r.value0);if(r instanceof ct)return P.value;throw new Error("Failed pattern match at FRP.Event (line 124, column 13 - line 126, column 33): "+[r.constructor.name])})(t),right:mo(function(r){if(r instanceof ct)return new s(r.value0);if(r instanceof pt)return P.value;throw new Error("Failed pattern match at FRP.Event (line 131, column 13 - line 133, column 32): "+[r.constructor.name])})(t)}}},Kn={filter:el,filterMap:mo,partition:function(t){return function(r){return{yes:el(t)(r),no:el(function(e){return!t(e)})(r)}}},partitionMap:function(t){return function(r){return{left:Ze(Kn)(function(){var e=ye(s.create)(N(P.value));return function(n){return e(t(n))}}())(r),right:Ze(Kn)(function(e){return Qc(t(e))})(r)}}},Compactable0:function(){return Do},Functor1:function(){return Er}},ph=function(t){return function(r){return function(e,n){var u=$e(P.value)(),f=xn(Cn)(),l=$e(P.value)(),_=xn(Cn)(),v=$e(!0)(),k=t(e,function(W){var p=te(v)();if(p)return bo(xn(Ye(W)(f)))();Se(new s(W))(u)();var m=te(l)();return Rf(m)(function(Q){return function(){return n(Q(W))}})()}),T=r(e,function(W){var p=te(v)();if(p)return bo(xn(Ye(W)(_)))();Se(new s(W))(l)();var m=te(u)();return Rf(m)(function(Q){return function(){return n(W(Q))}})()});Se(!1)(v)();var O=xn(uo(f))(),H=xn(uo(_))();return function(){return O.length===0?Se(Rp(H))(l)():pf(O,function(W){return Se(new s(W))(u)(),pf(H,function(p){return Se(new s(p))(l)(),n(p(W))})})}(),xn(sf(0)(qn(O))([])(f))(),xn(sf(0)(qn(H))([])(_))(),function(){return k(),T()}}}},ul=function(t){return function(r){return r}(al(345).subscribe)(t)},al=cb("backdoor","FRP.Event",function(){var t=function(){var e=sp(),n=$e(0)();return{event:function(u,f){var l=$e(f)(),_=te(n)();return mp(_,l,e),ro(function(v){return v+1|0})(n)(),function(){return Se(lb)(l)(),bp(_,e),void 0}},push:function(u){return function(){return vp(e,function(f){var l=te(f)();return l(u)})}}}};return{createO:Of,makeEvent:function(){var r=function(e){return function(n,u){return n?Ea(void 0):e(function(f){return function(){return u(f)}})()}};return r}(),makeEventO:function(){var r=function(e){return function(n,u){return n?Ea(void 0):e(u)}};return r}(),makePureEvent:function(){var r=function(e){return function(n,u){return e(function(f){return function(){return u(f)}})()}};return r}(),makeLemmingEvent:function(){var r=function(e){return function(n,u){var f=function(l){return function(_){return function(){return l(n,ku(_))}}};return e(f)(function(l){return function(){return u(l)}})()}};return r}(),makeLemmingEventO:function(){var r=function(e){return function(n,u){var f=function(l,_){return l(n,_)};return e(f,u)}};return r}(),create:t,createPure:t,createPureO:Of,subscribe:function(){var r=function(e){return function(n){return function(){return e(!1,ku(n))}}};return r}(),subscribeO:function(){var r=function(e,n){return e(!1,n)};return r}(),subscribePureO:function(){var r=function(e,n){return e(!0,n)};return r}(),subscribePure:function(){var r=function(){var e=function(n){return function(u){return function(){return n(!0,ku(u))}}};return e}();return r}(),bus:function(){var r=function(e){return function(n,u){var f=nl(819)();return u(e(f.push)(f.event)),Ea(void 0)}};return r}(),memoize:function(){var r=function(e){return function(n){return function(u,f){var l=Of();return f(n(l.event)),e(u,l.push)}}};return r}(),hot:function(){var r=function(e){return function(){var u=nl(837)(),f=ul(e)(u.push)();return{event:u.event,unsubscribe:f}}};return r}(),mailbox:function(){var r=function(e){return function(){var u=fb(e)();return{event:u.event,push:function(f){return function(){return u.push(f)}}}}};return r}(),mailboxed:function(){var r=function(e){var n=fb(e);return function(u){return function(f){return function(l,_){var v=n();return _(f(v.event)),u(l,v.push)}}}};return r}(),delay:function(){var r=function(e){return function(n){return function(u,f){var l=$e(ZC)(),_=n(u,function(v){var k=$e(P.value)(),T=Ym(e)(function(){f(v);var H=te(k)();return rr(Ea(void 0))(function(W){return ro(th(W))(l)})(H)()})();return Se(new s(T))(k)(),ro(rh(Gm(T)))(l)()});return function(){var k=te(l)();return eh(k)(Zm)(),_()}}}};return r}()}}),nl=cb("create","FRP.Event",function(){return function(){return void 0,function(r){return r}(al(461).create)()}}),oi=al(678),_b=nl(458),il=function(t){return function(r){return r}(oi.bus)(t)};var ol=function(t){return function(r){return r}(oi.makeLemmingEvent)(t)},_n=function(t){return function(r){return r}(oi.makeLemmingEventO)(t)},vb=function(t){return function(r){return r}(oi.makePureEvent)(t)},Nf=function(t){return function(r){return r}(oi.memoize)(t)};var sb=function(t){return function(r){return r}(oi.subscribePure)(t)};var lh={apply:function(t){return function(r){return ph(t)(fh(Oi)(r))}},Functor0:function(){return Er}};var Yt={pure:function(t){return function(r,e){return e(t),Ea(void 0)}},Apply0:function(){return lh}};var $r={alt:function(t){return function(r){return function(e,n){return nh(uh(function(u){return function(f){return function(){return u(),f()}}})(function(){return t(e,n)}))(function(){return r(e,n)})()}}},Functor0:function(){return Er}};var b={empty:function(t,r){return Ea(void 0)},Alt0:function(){return $r}},_h={Applicative0:function(){return Yt},Plus1:function(){return b}},De={keepLatest:oh,sampleOnRight:ah,sampleOnLeft:ih,fix:ch,Alternative0:function(){return _h},Filterable1:function(){return Kn}};var vh=V(Yt);var sh=function(t){return t},ko=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ao=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Bf=function(){function t(){}return t.value=new t,t}(),mh=function(t){return t};var Uf=d(),a=mh;var c=function(){return ko.create}();var Y=function(){return Ao.create}(),dr=function(){var t=R(iu)(R(z)(N(!0)));return function(r){return sh(t(r))}}(),Rt=function(t){return t.attr};var Au=function(t){var r=Rt(t);return function(e){return function(n){return vh(r(e)(n))}}};function mb(t){return()=>t.slice()}function bb(t){return r=>e=>()=>{e[t]=r}}function Db(t){return()=>t.slice()}var fl=function(t){return function(r){return function(e){return function(n){return t(r,e,n)}}}};var ll=function(t){var r=Jr(t);return function(){return function(){return function(e){return function(n){return function(u){return fu(r(e))(n)(u)}}}}}},_l=function(t){var r=Jr(t);return function(){return function(e){return function(n){return fn(r(e))(n)}}}};var Ab=V(Sr);var Wf={vb:function(t){return Ab(new X({},{}))}},db=function(t){return t.vb},dh={vbus:function(){var t=function(){return function(n){var u=db(n);return function(f){return function(l){return ol(function(_){return function(v){return function(){var T=u(nt.value)();return v(l(T.value0)(T.value1))(),Ab(void 0)}}})}}}},r=t(),e=function(){return function(n){return r(n)}};return e}()},sl=function(){return function(t){return function(r){return function(e){return e()(t)}(dh.vbus)(r)}}};var fi=function(t){var r=ll(t)()();return function(){return function(){return function(e){var n=db(e);return function(){return function(){return{vb:function(u){return function(){var l=n(nt.value)(),_=_b();return new X(r(nt.value)(_.push)(l.value0),r(nt.value)(_.event)(l.value1))}}}}}}}}};var ta=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ml=function(){function t(){}return t.value=new t,t}();var yo=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ci=function(){function t(){}return t.value=new t,t}(),qf=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Dl=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ma=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),y=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}();var ra={eq:function(t){return function(r){return t instanceof ta&&r instanceof ta?t.value0===r.value0:t instanceof ml&&r instanceof ml}}};var S=function(t){return new Dl(t)};var yb=function(t){return new bl(t)};var gb=t=>r=>r[t];var gh=function(){function t(l){this.fn=l}var r={},e=function(l,_){this.head=l,this.tail=_};function n(l){return new e(l,r)}function u(l){return function(_){return new e(l,_)}}function f(l){for(var _=[],v=l;v!==r;)_.push(v.head),v=v.tail;return _}return function(l){return function(_){return function(v){var k=function(O,H){return l(_(u)(v(O)))(H)},T=function(O,H,W){if(H===0)return O;var p=W[H-1];return new t(function(){var m=T(k(p,O),H-1,W);return m})};return function(O){for(var H=_(n)(v(O[O.length-1])),W=T(H,O.length-1,O);W instanceof t;)W=W.fn();return _(f)(W)}}}}}();var wa=function(t){return t.reflectType};var hb=function(t){return wa(t)};var pi=Dr;var Tb=function(){return function(t){return t}};var jf=function(t){var r=hb(t);return function(){return function(){return function(){return function(e){return gb(r(e))}}}}};var xb=[];var Eb=function(){return function(){return function(t){return function(r){return co(t)(r)}}}};function Mb(t){return function(){var r={};for(var e in t)hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}}var ea={};function yl(t){return t()}function wb(t){return function(r){return function(e){return function(n){var u=e;function f(_){return function(v){return r(v)(_)(n[_])}}for(var l in n)hasOwnProperty.call(n,l)&&(u=t(u)(f(l)));return u}}}}function Xf(t){return function(r){var e=[];for(var n in r)hasOwnProperty.call(r,n)&&e.push(t(n)(r[n]));return e}}var Oh=Object.keys||Xf(function(t){return function(){return t}});function gl(t){return function(r){return function(e){return function(){return e[t]=r,e}}}}var Sl=function(t){return function(r){return function(){return delete r[t],r}}};var Hh=sr(wt);var qh=Xf(function(t){return function(r){return r}});var zh=Mb;var Ib=function(t){return function(r){return yl(function(){var n=zh(r)();return t(n)(),n})}};var li=function(t){return function(r){return Ib(gl(t)(r))}};var Lb=wb(Oi),Vh=function(t){var r=at(t.Semigroup0()),e=Vt(t);return function(n){return Lb(function(u){return function(f){return function(l){return r(u)(n(f)(l))}}})(e)}},Pb={foldl:function(t){return Lb(function(r){return function(e){return t(r)}})},foldr:function(t){return function(r){return function(e){return Hh(t)(r)(qh(e))}}},foldMap:function(t){var r=Vh(t);return function(e){return r(N(e))}}};var $l=function(t){return Ib(Sl(t))};function Ob(t){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function Rb(t){return function(r){return function(e){return e[t]=r,e}}}function Nb(t){return function(r){return function(e){return e[t]=r(e[t]),e}}}function Bb(t){return function(r){return delete r[t],r}}var Ub=Eu;var Wb=function(){return function(){return function(t){var r=Jr(t);return function(e){return function(n){return function(u){return Nb(r(e))(n)(u)}}}}}};var Hb=function(){return function(){return function(t){var r=Jr(t);return function(e){return function(n){return function(u){return Rb(r(e))(n)(u)}}}}}};var qb=function(t){var r=Jr(t);return function(){return function(){return function(e){return function(n){return Bb(r(e))(n)}}}}};var zb=function(t){return function(r){return t(Ob(r))}};var Xh=xa(De),Jh=R(Er),Kh=Zi(wt)(b);var Qh=gt(Uu),Yh=R(Dr),hl=Tb(),Zh=pn(vu),tF=Yc(ds),_i=V(Sr),jb=R(fe),rF=R(pi),Xb=Je(Sr),Jb=Xb(Ke),Vb=Li(Ub),eF=Hb()()({reflectSymbol:function(){return"id"}}),nF=Wb()()({reflectSymbol:function(){return"parent"}}),uF=qb({reflectSymbol:function(){return"raiseId"}})()(),En=ur(fe),aF=ou(Sr),Kb=Xb(wt),iF=Ut(Wt),oF=Lr(wt)(b),fF=Ya(Sr)(wt),cF=at(Kr),pF=ar(Pb),lF=kr(eo),Gb=function(){function t(){}return t.value=new t,t}(),Fl=function(){function t(){}return t.value=new t,t}(),_F=function(){function t(){}return t.value=new t,t}();var vn=function(t){return function(r){return function(e){var n=function(u){return u(r)(e)};return function(u){if(u instanceof Dl)return oF(vn(t)(r)(e))(u.value0);if(u instanceof Ma)return Xh(Jh(vn(t)(r)(e))(u.value0));if(u instanceof y)return n(t.toElt(u.value0));if(u instanceof bl)return _n(function(f,l){var _=oe(ea)(),v=f(u.value0,function(k){var T=t.ids(e)(),O=oe(_i(void 0))(),H=t.ids(e)(),W=oe(_i(void 0))(),p=oe([])(),m=oe(_i(void 0))(),Q=jb(ta.create)(t.ids(e))(),ot=oe(Gb.value)(),Z=f(k,function(Bt){var J=Qr(ot)();if(Bt instanceof qf&&J instanceof Fl){var Cr=Qr(p)();return fF(function(it){return function(){return l(t.doLogic(Bt.value0)(e)(it))}})(Cr)()}if(Bt instanceof ci&&J instanceof Fl){En(cn(_F.value)(ot))();var qr=function(){var G=Qr(p)();Kb(G)(function(_t){return Jb(r.parent)(function(Nr){return function(){return l(t.disconnectElement(e)({id:_t,parent:Nr,scope:Q}))}})})();var B=Qr(O)();B();var bt=Qr(W)();return bt(),En(xr($l(T))(_))(),En(xr($l(H))(_))()};return En(cn(qr)(m))(),qr()}if(Bt instanceof yo&&J instanceof Gb){En(cn(Fl.value)(ot))();var Pe=f(vn(t)(function(){var it={};for(var G in r)({}).hasOwnProperty.call(r,G)&&(it[G]=r[G]);return it.scope=Q,it.raiseId=function(B){return En(xr(cF([B]))(p))},it}())(e)(Bt.value0),l);return En(xr(li(H)(Pe))(_))(),En(cn(Pe)(W))()}return void 0});En(cn(Z)(O))(),En(xr(li(T)(Z))(_))();var tr=Qr(m)();return tr()});return function(){return Qh(Qr(_))(pF(lF)(_i(void 0)))(),v()}});throw new Error("Failed pattern match at Bolson.Control (line 544, column 17 - line 630, column 20): "+[u.constructor.name])}}}},vF=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return function(u){return function(f){var l=function(_){return function(v){return _n(function(k,T){var O=mb(Yh(N(""))(hl(u)))(),H=Kh(Zh(function(tr){return tF(function(Bt){return function(J){return J instanceof y?function(Cr){return Cr(function(){var qr={};for(var Pe in _)({}).hasOwnProperty.call(_,Pe)&&(qr[Pe]=_[Pe]);return qr.parent=P.value,qr.scope=r(_.scope),qr.raiseId=function(it){return bb(tr)(it)(O)},qr}())(v)}(n.toElt(J.value0)):Bt(n.wrapElt(J))}})})(hl(u))),W=k(H,T),p=oe(_i(void 0))(),m=jb(rt)(Db(O))(),Q=rF(function(tr){return function(Bt){return new y(n.fromEltO1(function(J){return function(Cr){return _n(function(qr,Pe){return J.raiseId(tr)(),Jb(J.parent)(function(it){return function(){return Pe(n.giveNewParent(Cr)(zb(Vb(eF(nt.value)(tr))(Vb(nF(nt.value)(N(it)))(uF(nt.value))))(J))(Bt))}})(),_i(void 0)})}}))}})(m),ot=vn(e)(_)(v)(f(Q)(rt)),Z=k(ot,T);return En(cn(Z)(p))(),function(){W(),aF(!t)(Kb(hl(m))(function(J){return function(){return T(n.deleteFromCache(v)({id:J}))}}))();var Bt=Qr(p)();return Bt()}})}};return new y(n.fromEltO2(l))}}}}}}}}},sF=vF()()();var Qb=function(){return function(){return function(){return function(t){return function(r){return function(e){return function(n){return sF(!1)(iF)(t)(r)(e)(n)}}}}}}};var Qn=function(t){return t.state};var vi=function(t){var r=Qn(t);return function(e){return r(function(n){var u=e(n);return new X(u,u)})}};var wl=d(),hF=sl(),FF=Be(Ee),TF=R(Er),Il=Tr(),xF=Ct(ra),EF=V(Sr),Ml=V(Yt),MF=A(b),wF=ii(wt);var Kf=function(){return function(t){var r=hF(t);return function(e){return function(n){return new Ma(wl(r(e)(n)))}}}};var rD=function(t){return function(r){var e=function(n){return n instanceof y?new y(FF(function(u){return{pos:t,dynFamily:u.dynFamily,ez:u.ez,parent:u.parent,raiseId:u.raiseId,scope:u.scope}})(n.value0)):n instanceof Ma?new Ma(TF(e)(n.value0)):r};return e(r)}},$=function(t){return rD(s.create(t))};var eD=function(){return qf.create}(),nD=function(){return ci.value}(),IF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Il(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:xF})}},toElt:function(t){return t}}},LF=IF(),si=function(t){return new yo(Il(rD(P.value)(t)))},uD=function(t){return function(r){return new yo(Il($(t)(r)))}},Ia=function(t){return il(t)};var mi=function(t){return new Ma(wl(Ia(t)))};var PF=function(t){return function(r){return function(e){return vn(LF)(t)(r)(e)}}},OF=function(t){return function(r){var e=function(n){return function(u){return _n(function(f,l){var _=u.ids();n.raiseId(_)();var v=function(){if(n.parent instanceof P){var T=u.ids();return new X(Ml(u.makeElement({id:T,parent:P.value,scope:n.scope,tag:"div",pos:P.value,dynFamily:P.value})),T)}if(n.parent instanceof s)return new X(MF,n.parent.value0);throw new Error("Failed pattern match at Deku.Core (line 407, column 34 - line 421, column 36): "+[n.parent.constructor.name])}(),k=f(wF([v.value0,Ml(u.makeDynBeacon({id:_,parent:new s(v.value1),scope:n.scope,dynFamily:n.dynFamily,pos:n.pos})),Ml(u.attributeParent({id:_,parent:v.value1,pos:n.pos,dynFamily:n.dynFamily,ez:n.ez})),PF({parent:new s(v.value1),scope:n.scope,ez:!1,raiseId:function(T){return EF(void 0)},pos:P.value,dynFamily:new s(_)})(u)(t(r))]),l);return function(){return l(u.removeDynBeacon({id:_})),k()}})}};return new y(e)}},ua=OF(wl(yb));var Yf=R(Er);var Ll=ii(wt),bi=V(Yt),iD=A(b),RF=V(Sr),NF=Yu(De),BF=xa(De),UF=Qp(Kn),WF=Ct(Ua),So=d(),Qf=Tr(),HF=Ct(ra),qF=Ht($r),zF=at(Kr);var aD=R(pi);var VF=cf(),GF=Be(Ee);var jF=Qb()()();var XF=function(t){return function(r){return function(e){return Yf(function(n){return t.setText(function(u){return{id:r,text:u}}(n))})(e)}}},JF=function(t){return function(r){return function(e){return Yf(function(n){return function(u){if(u.value instanceof ko)return t.setProp({id:r,key:u.key,value:u.value.value0});if(u.value instanceof Ao)return t.setCb({id:r,key:u.key,value:u.value.value0});if(u.value instanceof Bf)return t.unsetAttribute({id:r,key:u.key});throw new Error("Failed pattern match at Deku.Control (line 71, column 28 - line 74, column 47): "+[u.value.constructor.name])}(Uf(n))})(e)}}};var tn=function(t){var r=function(e){return function(n){return _n(function(u,f){var l=n.ids();e.raiseId(l)();var _=u(Ll([bi(n.makeText({id:l,parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily})),XF(n)(l)(t),rr(iD)(function(v){return bi(n.attributeParent({id:l,parent:v,pos:e.pos,dynFamily:e.dynFamily,ez:e.ez}))})(e.parent)]),f);return function(){return f(n.deleteFromCache({id:l})),_()}})}};return new y(r)},D=function(t){return tn(bi(t))},Zf=function(t){return function(r){var e=function(){var n=function(u){return function(f){return new X(u+1|0,new X(f,u))}};return NF(n)(0)}();return ua(BF(Nf(e(r))(function(n){return Yf(function(u){return Ll([Yf(N(ci.value))(UF(function(){var f=WF(u.value1+1|0);return function(l){return f(zr(l))}}())(n)),bi(si(So(t(u.value0))))])})(n)})))}};var KF=function(){return{doLogic:function(t){return function(r){return function(e){return r.sendToPos({id:e,pos:t})}}},ids:function(t){return function(r){return r.ids}(Qf(t))},disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:HF})}},toElt:function(t){return t}}},oD=KF();var QF=function(t){return function(r){return function(e){return vn(oD)(t)(r)(e)}}};var C=function(t){return function(r){return function(e){var n=function(u){return function(f){return _n(function(l,_){var v=f.ids();u.raiseId(v)();var k=l(qF(Ll(zF([bi(f.makeElement({id:v,parent:u.parent,scope:u.scope,tag:t,pos:u.pos,dynFamily:u.dynFamily})),JF(f)(v)(r)])(rr([])(function(T){return[bi(f.attributeParent({id:v,parent:T,pos:u.pos,dynFamily:u.dynFamily,ez:u.ez}))]})(u.parent))))(QF({parent:new s(v),scope:u.scope,ez:!0,raiseId:function(T){return RF(void 0)},pos:P.value,dynFamily:P.value})(f)(e)),_);return function(){return _(f.deleteFromCache({id:v})),k()}})}};return n}}};var fD=function(){return function(t){return function(r){return jF(oD)({fromEltO1:So,fromEltO2:So,toElt:So,wrapElt:function(e){return new y(C("div")(iD)(VF(e)))},giveNewParent:function(e){return function(n){return function(u){return Qf(e).giveNewParent(n)}}},deleteFromCache:function(e){return function(n){return n.deleteFromCache}(Qf(e))}})(aD(Qf)(t))(GF(aD(function(e){return e(void 0)}))(So(Nu(r))))}}};var Hr=function(){function t(){}return t.value=new t,t}();var Yr={attr:function(t){return function(r){return a({key:"href",value:c(r)})}}};var YF=K(z),yr=function(){function t(){}return t.value=new t,t}();var aa={attr:function(t){return function(r){return a({key:"click",value:Y(N(YF(r)(!0)))})}}};var Zr={attr:function(t){return function(r){return a({key:"click",value:Y(r)})}}};var ke=function(){function t(){}return t.value=new t,t}();var Di={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var cD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var pD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var lD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var _D={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var vD={attr:function(t){return function(r){return a({key:"style",value:c(r)})}}};var sD=d(),Co=function(t){return function(r){return new y(C("a")(t)(sD(S(sD(h($)(r))))))}};var bD=d(),tc=function(t){return function(r){return new y(C("div")(t)(bD(S(bD(h($)(r))))))}},br=tc(A(b));var DD=d(),oa=function(t){return function(r){return new y(C("span")(t)(DD(S(DD(h($)(r))))))}},ho=oa(A(b));var Pl=function(){function t(){}return t.value=new t,t}();var kD={attr:function(t){return function(r){return a({key:"cx",value:c(r)})}}};var Ol=function(){function t(){}return t.value=new t,t}();var AD={attr:function(t){return function(r){return a({key:"cy",value:c(r)})}}};var Rl=function(){function t(){}return t.value=new t,t}();var dD={attr:function(t){return function(r){return a({key:"fill",value:c(r)})}}};var Nl=function(){function t(){}return t.value=new t,t}();var yD={attr:function(t){return function(r){return a({key:"height",value:c(r)})}}};var Bl=function(){function t(){}return t.value=new t,t}();var gD={attr:function(t){return function(r){return a({key:"r",value:c(r)})}}};var Ul=function(){function t(){}return t.value=new t,t}();var SD={attr:function(t){return function(r){return a({key:"stroke",value:c(r)})}}};var Wl=function(){function t(){}return t.value=new t,t}();var $D={attr:function(t){return function(r){return a({key:"stroke-width",value:c(r)})}}};var Fo=function(){function t(){}return t.value=new t,t}();var CD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var hD={attr:function(t){return function(r){return a({key:"width",value:c(r)})}}};var TD=d(),he=function(t){return function(r){return new y(C("button")(t)(TD(S(TD(h($)(r))))))}},Hl=he(A(b));var xD=d(),ql=function(t){return function(r){return new y(C("circle")(t)(xD(S(xD(h($)(r))))))}};var ED=d(),MD=function(t){return function(r){return new y(C("code")(t)(ED(S(ED(h($)(r))))))}},Or=MD(A(b));var wD=d(),ID=function(t){return function(r){return new y(C("i")(t)(wD(S(wD(h($)(r))))))}},zl=ID(A(b));var LD=d(),PD=function(t){return function(r){return new y(C("li")(t)(LD(S(LD(h($)(r))))))}},Vl=PD(A(b));var OD=d(),RD=function(t){return function(r){return new y(C("pre")(t)(OD(S(OD(h($)(r))))))}},Rr=RD(A(b));var ND=d(),Gl=function(t){return function(r){return new y(C("svg")(t)(ND(S(ND(h($)(r))))))}};var BD=d(),UD=function(t){return function(r){return new y(C("ul")(t)(BD(S(BD(h($)(r))))))}},jl=UD(A(b));var Zn=V(Hn),lT=A(ss),ec=function(){function t(){}return t.value=new t,t}(),ki=function(){function t(){}return t.value=new t,t}(),Ai=function(){function t(){}return t.value=new t,t}(),di=function(){function t(){}return t.value=new t,t}(),yi=function(){function t(){}return t.value=new t,t}(),gi=function(){function t(){}return t.value=new t,t}(),Si=function(){function t(){}return t.value=new t,t}(),$i=function(){function t(){}return t.value=new t,t}(),Ci=function(){function t(){}return t.value=new t,t}(),hi=function(){function t(){}return t.value=new t,t}(),WD=function(t){return t==="Intro"?Zn(ec.value):t==="HelloWorld"?Zn(ki.value):t==="SimpleComponent"?Zn(Ai.value):t==="PURSX1"?Zn(di.value):t==="PURSX2"?Zn(yi.value):t==="Events"?Zn(gi.value):t==="Effects"?Zn(Si.value):t==="Events2"?Zn($i.value):t==="Portals"?Zn(Ci.value):t==="SSR"?Zn(hi.value):lT};function Xl(){window.scrollTo(0,0)}var le=Xl;var qD=A(b),zD=Ht($r),vT=R(Er),sT=Be(Ee),mT=ii(wt),HD=V(Yt),bT=V(Sr),DT={reflectType:function(){return"~"}},kT=Tr(),AT=Ct(ra),dT=d();var Vr={pursxToElement:function(t){return function(r){return function(e){return{cache:ea,element:function(n){return function(u){return qD}}}}}}},Jl=function(t){return t.pursxToElement},_e=function(){return function(t){var r=Jl(t);return function(e){var n=wa(e);return function(u){var f=_l(u)();return{pursxToElement:function(l){return function(_){return function(v){var k=r(l)(nt.value)(v);return{cache:li(n(nt.value))(!0)(k.cache),element:function(T){return function(O){return zD(vT(sT(Uf)(function(H){if(H.value instanceof ko)return O.setProp({id:n(nt.value)+("@!%"+l),key:H.key,value:H.value.value0});if(H.value instanceof Ao)return O.setCb({id:n(nt.value)+("@!%"+l),key:H.key,value:H.value.value0});if(H.value instanceof Bf)return O.unsetAttribute({id:n(nt.value)+("@!%"+l),key:H.key});throw new Error("Failed pattern match at Deku.Pursx (line 4577, column 40 - line 4591, column 26): "+[H.value.constructor.name])}))(f(nt.value)(v)))(k.element(T)(O))}}}}}}}}}}};var Kl=function(t){var r=wa(t);return function(e){var n=wa(e);return function(){return function(){return function(u){var f=Jl(u);return function(l){return function(_){return function(v){var k=function(T){return function(O){return _n(function(H,W){var p=O.ids(),m=O.ids();T.raiseId(p)();var Q=f(m)(nt.value)(v),ot=H(mT([HD(O.makePursx({id:p,parent:T.parent,cache:Q.cache,dynFamily:T.dynFamily,pos:T.pos,pxScope:m,scope:T.scope,html:r(_),verb:n(l)})),Q.element(T)(O),rr(qD)(function(Z){return HD(O.attributeParent({id:p,parent:Z,pos:T.pos,dynFamily:T.dynFamily,ez:!1}))})(T.parent)]),W);return function(){return W(O.deleteFromCache({id:p})),ot()}})}};return new y(k)}}}}}}}},Gr=function(t){var r=Kl(t)(DT)()();return function(){return function(){return function(e){return r(e)(nt.value)}}}},VD=function(t){var r=Gr(t)()();return function(){return function(e){var n=r(e);return function(u){return n(u)({})}}}},yT=function(t){return function(r){return function(e){return vn({doLogic:function(n){return function(u){return function(f){return u.sendToPos({id:f,pos:n})}}},ids:function(n){return function(u){return u.ids}(kT(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:AT})}},toElt:function(n){return n}})(t)(r)(dT(e))}}},ve=function(){return function(t){var r=Jl(t);return function(e){var n=wa(e);return function(u){var f=_l(u)();return{pursxToElement:function(l){return function(_){return function(v){var k=f(nt.value)(v),T=r(l)(nt.value)(v);return{cache:li(n(nt.value))(!1)(T.cache),element:function(O){return function(H){return zD(yT({parent:new s(n(nt.value)+("@!%"+l)),scope:O.scope,raiseId:function(W){return bT(void 0)},pos:O.pos,ez:!1,dynFamily:P.value})(H)(k))(T.element(O)(H))}}}}}}}}}}};var Ql=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState')
import Deku.Do as Deku
import Deku.Pursx ((~~))
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState'
  myDom ~~
    { myli: pure (D.Style := "background-color:rgb(200,240,210);")
    , somethingNew:
        ( D.button (pure (D.OnClick := push (Just unit)))
            [ text
                $ (compact event $> "Thanks for clicking me!") <|>
                    pure "I was dynamically inserted"
            ]
        )
    }`,Yl=`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Type.Proxy (Proxy(..))

myDom =
  Proxy
    :: Proxy
         """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)`,Zl=`module Main where

import Prelude

import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Data.Foldable (oneOfMap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.Core (Domable)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)
import Type.Prelude (Proxy(..))

main :: Effect Unit
main = runInBody Deku.do
  push /\\ event <- useState unit
  portal
    ( map
        ( \\i -> D.video
            (oneOfMap pure [ D.Controls := "true", D.Width := "250" ])
            [ D.source
                (oneOfMap pure [ D.Src := i, D.Xtype := "video/mp4" ])
                []
            ]
        )
        ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
            : "https://www.w3schools.com/jsref/movie.mp4"
            : V.empty
        )
    )
    \\(v /\\ _) -> do
      let
        p0 :: Domable _ _
        p0 = index (Proxy :: _ 0) v

        p1 :: Domable _ _
        p1 = index (Proxy :: _ 1) v

        ev :: Boolean -> Event Boolean
        ev b = fold (\\a _ -> not a) b event

        flips :: Boolean -> Domable _ _
        flips = D.span_ <<< pure <<< switcher (if _ then p0 else p1) <<< ev
      D.div_
        [ D.button (pure $ D.OnClick := push unit)
            [ text_ "Switch videos" ]
        , D.div_ [ D.span_ [ flips true ], flips false ]
        ]
`,t_=`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")`,r_=`module Main where

import Prelude

import Data.Filterable (compact)
import Data.Foldable (oneOf)
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Control (text_)
import Deku.Core (Nut, dyn)
import Deku.DOM as D
import Deku.Hooks (useDyn_, useState')
import Deku.Do as Deku
import Deku.Listeners (click, keyUp, textInput)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, mapAccum)
import Web.UIEvent.KeyboardEvent (code)

data MainUIAction
  = AddTodo
  | ChangeText String

main :: Effect Unit
main = runInBody Deku.do
  pushAction /\\ actionEvent <- useState'
  let
    accumulateTextAndEmitOnSubmit :: Event String
    accumulateTextAndEmitOnSubmit = compact
      ( mapAccum
          ( \\a b -> case b of
              AddTodo -> a /\\ Just a
              ChangeText s -> s /\\ Nothing
          )
          ""
          actionEvent
      )

    top :: Nut
    top =
      D.div_
        [ D.input
            ( oneOf
                [ textInput $ pure (pushAction <<< ChangeText)
                , keyUp $ pure \\evt -> do
                    when (code evt == "Enter") $ do
                      pushAction AddTodo
                ]
            )
            []
        , D.button
            (click $ pure $ pushAction AddTodo)
            [ text_ "Add" ]
        ]
  D.div_
    [ top
    , dyn
        $ map
            ( \\txt -> Deku.do
                { remove, sendTo } <- useDyn_
                D.div_
                  [ text_ txt
                  , D.button
                      (click $ pure (sendTo 0))
                      [ text_ "Prioritize" ]
                  , D.button
                      (click $ pure remove)
                      [ text_ "Delete" ]
                  ]
            )
            accumulateTextAndEmitOnSubmit
    ]

`,e_=`module Main where

import Prelude

import Data.Tuple.Nested ((/\\))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (Event, fold)

main :: Effect Unit
main = runInBody Deku.do
  setButtonClicked /\\ buttonClicked <- useState unit
  setSliderMoved /\\ sliderMoved <- useState 50.0
  let
    countUp :: Event Int
    countUp = fold (\\a _ -> 1 + a) (-1) buttonClicked
  D.div_
    [ D.button
        (click_ (setButtonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            (("Val: " <> _) <<< show <$> countUp)
        ]
    , D.div_
        [ D.input
            (slider (pure setSliderMoved))
            []
        , D.div_
            [ text
                (("Val: " <> _) <<< show <$> sliderMoved)
            ]
        ]
    ]
`,n_=`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, separate)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Hooks (useState)
import Deku.Do as Deku
import Deku.Listeners (click_)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (Event, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
                ( "GET /api response failed to decode: " <>
                    AX.printError err
                )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody Deku.do
  setUIAction /\\ uiAction <- useState Initial
  let
    split :: { left :: Event Unit, right :: Event String }
    split = separate $ compact $
      map
        ( case _ of
            Loading -> Just $ Left unit
            Result s -> Just $ Right s
            _ -> Nothing
        )
        uiAction
    { left: loading, right: result } = split
  D.div_
    [ D.div_
        [ D.button (click_ (clickCb setUIAction))
            [ text
                ( pure clickText
                    <|> (loading $> "Loading...")
                    <|> (result $> clickText)
                )
            ]
        ]
    , D.div
        ( (pure (D.Style := "display: none;")) <|>
            ( compact
                ( mapAccum
                    ( \\b _ -> (b && false) /\\
                        if b then Just unit else Nothing
                    )
                    true
                    result
                ) $> (D.Style := "display: block;")
            )
        )
        [ D.pre_ [ D.code_ [ text (pure "" <|> result) ] ] ]
    ]
`,u_=`module Main where

import Prelude

import Data.Foldable (oneOf)
import Deku.Attribute ((!:=), (:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody
  ( D.div_
      [ D.button_ [ text_ "I do nothing" ]
      , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
      , D.div_
          [ D.a (pure $ D.Href := "https://example.com")
              [ text_ "foo " ]
          , D.i_ [ text_ " bar " ]
          , D.span (pure $ D.Style := "font-weight: 800;")
              [ text_ " baz" ]
          ]
      , D.svg (oneOf [ D.Height !:= "100", D.Width !:= "100" ])
          [ D.circle
              ( oneOf
                  [ D.Cx !:= "50"
                  , D.Cy !:= "50"
                  , D.R !:= "40"
                  , D.Stroke !:= "black"
                  , D.StrokeWidth !:= "3"
                  , D.Fill !:= "red"
                  ]
              )
              []
          ]

      ]
  )`,a_=`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (push.buttonClicked unit))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( pure "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (\\a _ -> a + 1)
                      (-1)
                      (pure unit <|> event.buttonClicked)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (pure push.sliderMoved))
            []
        , D.div_
            [ text
                ( pure "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`,i_=`module Deku.Example.Docs.Examples.SSR.Build where

import Prelude

import Control.Monad.ST.Global (toEffect)
import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  toEffect
    ( pure
        """<!DOCTYPE html>
<html>
  <head>
    <title>My static page</title>
		<script src="bundle.js" defer><\/script>
  </head>""" <> runSSR app <> pure "</html>"
    ) >>= log`,o_=`module Deku.Example.Docs.Examples.SSR.Live where

import Prelude

import Deku.Examples.Docs.Examples.SSR.App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`;function GD(t){return t.target}function jr(t){return function(){return t.preventDefault()}}function jD(t,r,e){return t==null?r:e(t)}function f_(t){return t}var Fi=rr(null)(f_),re=function(t){return jD(t,P.value,s.create)};var ic=function(t){return re(GD(t))};var JD=ve(),TT=Gr({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>pure</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>pure (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(JD(_e()(JD(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),xT=R(Dr),ET=V(sa),c_=V(Yt),KD=Rt(Yr),MT=Rt(Di),QD=Zi(wt)(b),wT=Au(yD),IT=Au(hD),LT=Au(kD),PT=Au(AD),OT=Au(gD),RT=Au(SD),NT=Au($D),BT=Au(dD),UT=Lr(wt)(b),WT=Rt(Zr),YD=kr(Pr),HT=function(){return nt.value}(),ZD=function(t){return TT(HT)({code:Rr([Or([D(u_)])]),result:br([Hl([D("I do nothing")]),jl(xT(function(r){return Vl(ET(D(r)))})(["A","B","C"])),br([Co(c_(KD(Hr.value)("https://example.com")))([D("foo ")]),zl([D(" bar ")]),oa(c_(MT(ke.value)("font-weight: 800;")))([D(" baz")])]),Gl(QD([wT(Nl.value)("100"),IT(Fo.value)("100")]))([ql(QD([LT(Pl.value)("50"),PT(Ol.value)("50"),OT(Bl.value)("40"),RT(Ul.value)("black"),NT(Wl.value)("3"),BT(Rl.value)("red")]))([])])]),next:UT(c_)([WT(yr.value)(dr(function(r){return YD(YD(jr(r))(t.dpage(di.value)))(le)})),KD(Hr.value)(t.slug+"pursx1/")])})};function tk(t,r,e,n,u){return function(f,l){var _=t.newXHR(),v=t.fixupUrl(u.url,_);if(_.open(u.method||"GET",v,!0,u.username,u.password),u.headers)try{for(var k=0,T;(T=u.headers[k])!=null;k++)_.setRequestHeader(T.field,T.value)}catch(H){f(H)}var O=function(H){return function(){f(new Error(H))}};return _.onerror=O(e),_.ontimeout=O(r),_.onload=function(){l({status:_.status,statusText:_.statusText,headers:_.getAllResponseHeaders().split(`\r
`).filter(function(H){return H.length>0}).map(function(H){var W=H.indexOf(":");return n(H.substring(0,W))(H.substring(W+2))}),body:_.response})},_.responseType=u.responseType,_.withCredentials=u.withCredentials,_.timeout=u.timeout,_.send(u.content),function(H,W,p){try{_.abort()}catch(m){return W(m)}return p()}}}var oc="application/json",rk="application/x-www-form-urlencoded";var nk=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),uk=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ak=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ik=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),ok=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),p_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),l_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),fk=function(t){return t instanceof p_?new s(rk):t instanceof l_?new s(oc):P.value};var ck=Tr();var fc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),cc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pk=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),lk=function(t){if(t instanceof fc||t instanceof cc)return ck(t.value0);if(t instanceof pk)return t.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[t.constructor.name])};var __=function(t){if(t instanceof fc)return"Accept";if(t instanceof cc)return"Content-Type";if(t instanceof pk)return t.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[t.constructor.name])};var _k=Ut(Wt),v_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),s_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),m_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),To=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),b_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),pc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),vk=function(t){if(t instanceof v_)return"arraybuffer";if(t instanceof s_)return"blob";if(t instanceof m_)return"document";if(t instanceof To||t instanceof b_)return"text";if(t instanceof pc)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[t.constructor.name])},sk=function(t){return t instanceof To?new s(oc):P.value};var mk=function(){return new To(_k)}(),bk=function(){return new pc(_k)}();var kk=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}();function Ti(t){return new Error(t)}function xo(t){return t.message}function Eo(t){return function(){throw t}}var In=function(t){return t.throwError};var $u=function(t){return t.catchError};var _c=function(t){var r=$u(t),e=t.MonadThrow0().Monad0(),n=R(e.Bind1().Apply0().Functor0()),u=V(e.Applicative0());return function(f){return r(n(ct.create)(f))(function(l){return u(pt.create(l))})}};var Ln=function(t){return t.liftEffect};var KT=R(ka);var D_=function(t){return t};var k_=function(t){return t};var Dc=function(t){return function(r){return t(r)}},dk=function(t){var r=R(t);return{map:function(e){return Dc(r(KT(e)))}}};var A_=function(t){return{Applicative0:function(){return Oo(t)},Bind1:function(){return d_(t)}}},d_=function(t){var r=gt(t.Bind1()),e=V(t.Applicative0());return{bind:function(n){return function(u){return r(n)(ye(function(f){return e(pt.create(f))})(function(f){var l=u(f);return l}))}},Apply0:function(){return yk(t)}}},yk=function(t){var r=dk(t.Bind1().Apply0().Functor0());return{apply:Ue(A_(t)),Functor0:function(){return r}}},Oo=function(t){return{pure:function(){var r=V(t.Applicative0());return function(e){return D_(r(ct.create(e)))}}(),Apply0:function(){return yk(t)}}};var gk=function(t){var r=A_(t);return{throwError:function(){var e=V(t.Applicative0());return function(n){return D_(e(pt.create(n)))}}(),Monad0:function(){return r}}};var Sk=function(t){var r=at(t);return function(e){var n=e.Bind1(),u=gt(n),f=V(e.Applicative0()),l=dk(n.Apply0().Functor0());return{alt:function(_){return function(v){return u(_)(function(k){if(k instanceof ct)return f(new ct(k.value0));if(k instanceof pt)return u(v)(function(T){if(T instanceof ct)return f(new ct(T.value0));if(T instanceof pt)return f(new pt(r(k.value0)(T.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[T.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[k.constructor.name])})}},Functor0:function(){return l}}}};var YT=Tr();var $k=function(t){return YT(k_(t))};function y_(t){return JSON.stringify(t)}function g_(t){return function(r){return JSON.stringify(r,null,t)}}var Ck=ea;function Fk(t,r,e){try{return r(JSON.parse(e))}catch(n){return t(n.message)}}var Tk=function(t){return Fk(pt.create,ct.create,t)};var Ac=function(t){return function(r){return function(e){return e.replace(t,r)}}};var S_=function(t){return function(r){return r.join(t)}};function ox(t){return t.replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16)})}function Mk(t,r,e){try{return r(ox(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(n){return t(n)}}var dc=function(){return fl(Mk)(N(P.value))(s.create)}();var px=Gt(Da),wk=R(Fr),lx=qe(Sa)(Hn);var _x=function(t){return t};var Ik=function(){var t=function(n){if(n.value1 instanceof P)return dc(n.value0);if(n.value1 instanceof s)return px(wk(function(u){return function(f){return u+("="+f)}})(dc(n.value0)))(dc(n.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[n.constructor.name])},r=wk(S_("&")),e=lx(t);return function(n){return r(e(_x(n)))}}();var sx=function(){function t(){}return t.value=new t,t}(),No=function(){function t(){}return t.value=new t,t}(),mx=function(){function t(){}return t.value=new t,t}(),Lk=function(){function t(){}return t.value=new t,t}(),Pk=function(){function t(){}return t.value=new t,t}(),Ok=function(){function t(){}return t.value=new t,t}(),bx=function(){function t(){}return t.value=new t,t}(),Dx=function(){function t(){}return t.value=new t,t}(),kx=function(){function t(){}return t.value=new t,t}(),Ax=function(){function t(){}return t.value=new t,t}(),dx=function(){function t(){}return t.value=new t,t}(),yx=function(){function t(){}return t.value=new t,t}(),gx=function(){function t(){}return t.value=new t,t}(),Sx=function(){function t(){}return t.value=new t,t}(),$x=function(){function t(){}return t.value=new t,t}(),Rk=function(){function t(){}return t.value=new t,t}();var Cx=function(t){return t},hx={show:function(t){if(t instanceof sx)return"OPTIONS";if(t instanceof No)return"GET";if(t instanceof mx)return"HEAD";if(t instanceof Lk)return"POST";if(t instanceof Pk)return"PUT";if(t instanceof Ok)return"DELETE";if(t instanceof bx)return"TRACE";if(t instanceof Dx)return"CONNECT";if(t instanceof kx)return"PROPFIND";if(t instanceof Ax)return"PROPPATCH";if(t instanceof dx)return"MKCOL";if(t instanceof yx)return"COPY";if(t instanceof gx)return"MOVE";if(t instanceof Sx)return"LOCK";if(t instanceof $x)return"UNLOCK";if(t instanceof Rk)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[t.constructor.name])}};var Nk=ye(Dt(hx))(Cx);var Uk=function(){var t=hf(zp);return function(r){return Ff(t(r))}}();var Wk=function(t){return t.value0};var ze=function(){var t={},r="Pure",e="Throw",n="Catch",u="Sync",f="Async",l="Bind",_="Bracket",v="Fork",k="Sequential",T="Map",O="Apply",H="Alt",W="Cons",p="Resume",m="Release",Q="Finalizer",ot="Finalized",Z="Forked",tr="Fiber",Bt="Thunk";function J(st,ir,Mr,lr){this.tag=st,this._1=ir,this._2=Mr,this._3=lr}function Cr(st){var ir=function(Mr,lr,St){return new J(st,Mr,lr,St)};return ir.tag=st,ir}function qr(st){return new J(r,void 0)}function Pe(st){try{st()}catch(ir){setTimeout(function(){throw ir},0)}}function it(st,ir,Mr){try{return ir(Mr())}catch(lr){return st(lr)}}function G(st,ir,Mr){try{return ir(Mr)()}catch(lr){return Mr(st(lr))(),qr}}var B=function(){var st=1024,ir=0,Mr=0,lr=new Array(st),St=!1;function ut(){var pr;for(St=!0;ir!==0;)ir--,pr=lr[Mr],lr[Mr]=void 0,Mr=(Mr+1)%st,pr();St=!1}return{isDraining:function(){return St},enqueue:function(pr){var Xt,hr;ir===st&&(hr=St,ut(),St=hr),lr[(Mr+ir)%st]=pr,ir++,St||ut()}}}();function bt(st){var ir={},Mr=0,lr=0;return{register:function(St){var ut=Mr++;St.onComplete({rethrow:!0,handler:function(pr){return function(){lr--,delete ir[ut]}}})(),ir[ut]=St,lr++},isEmpty:function(){return lr===0},killAll:function(St,ut){return function(){if(lr===0)return ut();var pr=0,Xt={};function hr(mr){Xt[mr]=ir[mr].kill(St,function(Br){return function(){delete Xt[mr],pr--,st.isLeft(Br)&&st.fromLeft(Br)&&setTimeout(function(){throw st.fromLeft(Br)},0),pr===0&&ut()}})()}for(var ne in ir)ir.hasOwnProperty(ne)&&(pr++,hr(ne));return ir={},Mr=0,lr=0,function(mr){return new J(u,function(){for(var Br in Xt)Xt.hasOwnProperty(Br)&&Xt[Br]()})}}}}}var _t=0,Nr=1,On=2,Fu=3,Ba=4,Te=5,_a=6;function wi(st,ir,Mr){var lr=0,St=_t,ut=Mr,pr=null,Xt=null,hr=null,ne=null,mr=null,Br=0,va=0,an=null,Tu=!0;function xu($t){for(var Tt,Zt,nr;;)switch(Tt=null,Zt=null,nr=null,St){case On:St=Nr;try{ut=hr(ut),ne===null?hr=null:(hr=ne._1,ne=ne._2)}catch(se){St=Te,pr=st.left(se),ut=null}break;case Fu:st.isLeft(ut)?(St=Te,pr=ut,ut=null):hr===null?St=Te:(St=On,ut=st.fromRight(ut));break;case Nr:switch(ut.tag){case l:hr&&(ne=new J(W,hr,ne)),hr=ut._2,St=Nr,ut=ut._1;break;case r:hr===null?(St=Te,ut=st.right(ut._1)):(St=On,ut=ut._1);break;case u:St=Fu,ut=it(st.left,st.right,ut._1);break;case f:St=Ba,ut=G(st.left,ut._1,function(se){return function(){lr===$t&&(lr++,B.enqueue(function(){lr===$t+1&&(St=Fu,ut=se,xu(lr))}))}});return;case e:St=Te,pr=st.left(ut._1),ut=null;break;case n:hr===null?mr=new J(W,ut,mr,Xt):mr=new J(W,ut,new J(W,new J(p,hr,ne),mr,Xt),Xt),hr=null,ne=null,St=Nr,ut=ut._1;break;case _:Br++,hr===null?mr=new J(W,ut,mr,Xt):mr=new J(W,ut,new J(W,new J(p,hr,ne),mr,Xt),Xt),hr=null,ne=null,St=Nr,ut=ut._1;break;case v:St=Fu,Tt=wi(st,ir,ut._2),ir&&ir.register(Tt),ut._1&&Tt.run(),ut=st.right(Tt);break;case k:St=Nr,ut=Uy(st,ir,ut._1);break}break;case Te:if(hr=null,ne=null,mr===null)St=_a,ut=Xt||pr||ut;else switch(Tt=mr._3,nr=mr._1,mr=mr._2,nr.tag){case n:Xt&&Xt!==Tt&&Br===0?St=Te:pr&&(St=Nr,ut=nr._2(st.fromLeft(pr)),pr=null);break;case p:Xt&&Xt!==Tt&&Br===0||pr?St=Te:(hr=nr._1,ne=nr._2,St=On,ut=st.fromRight(ut));break;case _:Br--,pr===null&&(Zt=st.fromRight(ut),mr=new J(W,new J(m,nr._2,Zt),mr,Tt),(Xt===Tt||Br>0)&&(St=Nr,ut=nr._3(Zt)));break;case m:mr=new J(W,new J(ot,ut,pr),mr,Xt),St=Nr,Xt&&Xt!==Tt&&Br===0?ut=nr._1.killed(st.fromLeft(Xt))(nr._2):pr?ut=nr._1.failed(st.fromLeft(pr))(nr._2):ut=nr._1.completed(st.fromRight(ut))(nr._2),pr=null,Br++;break;case Q:Br++,mr=new J(W,new J(ot,ut,pr),mr,Xt),St=Nr,ut=nr._1;break;case ot:Br--,St=Te,ut=nr._1,pr=nr._2;break}break;case _a:for(var Ir in an)an.hasOwnProperty(Ir)&&(Tu=Tu&&an[Ir].rethrow,Pe(an[Ir].handler(ut)));an=null,Xt&&pr?setTimeout(function(){throw st.fromLeft(pr)},0):st.isLeft(ut)&&Tu&&setTimeout(function(){if(Tu)throw st.fromLeft(ut)},0);return;case _t:St=Nr;break;case Ba:return}}function wr($t){return function(){if(St===_a)return Tu=Tu&&$t.rethrow,$t.handler(ut)(),function(){};var Tt=va++;return an=an||{},an[Tt]=$t,function(){an!==null&&delete an[Tt]}}}function It($t,Tt){return function(){if(St===_a)return Tt(st.right(void 0))(),function(){};var Zt=wr({rethrow:!1,handler:function(){return Tt(st.right(void 0))}})();switch(St){case _t:Xt=st.left($t),St=_a,ut=Xt,xu(lr);break;case Ba:Xt===null&&(Xt=st.left($t)),Br===0&&(St===Ba&&(mr=new J(W,new J(Q,ut($t)),mr,Xt)),St=Te,ut=null,pr=null,xu(++lr));break;default:Xt===null&&(Xt=st.left($t)),Br===0&&(St=Te,ut=null,pr=null)}return Zt}}function Kt($t){return function(){var Tt=wr({rethrow:!1,handler:$t})();return St===_t&&xu(lr),Tt}}return{kill:It,join:Kt,onComplete:wr,isSuspended:function(){return St===_t},run:function(){St===_t&&(B.isDraining()?xu(lr):B.enqueue(function(){xu(lr)}))}}}function By(st,ir,Mr,lr){var St=0,ut={},pr=0,Xt={},hr=new Error("[ParAff] Early exit"),ne=null,mr=t;function Br(wr,It,Kt){var $t=It,Tt=null,Zt=null,nr=0,Ir={},se,Ii;t:for(;;)switch(se=null,$t.tag){case Z:if($t._3===t&&(se=ut[$t._1],Ir[nr++]=se.kill(wr,function(Wy){return function(){nr--,nr===0&&Kt(Wy)()}})),Tt===null)break t;$t=Tt._2,Zt===null?Tt=null:(Tt=Zt._1,Zt=Zt._2);break;case T:$t=$t._2;break;case O:case H:Tt&&(Zt=new J(W,Tt,Zt)),Tt=$t,$t=$t._1;break}if(nr===0)Kt(st.right(void 0))();else for(Ii=0,se=nr;Ii<se;Ii++)Ir[Ii]=Ir[Ii]();return Ir}function va(wr,It,Kt){var $t,Tt,Zt,nr,Ir,se;st.isLeft(wr)?($t=wr,Tt=null):(Tt=wr,$t=null);t:for(;;){if(Zt=null,nr=null,Ir=null,se=null,ne!==null)return;if(It===null){lr($t||Tt)();return}if(It._3!==t)return;switch(It.tag){case T:$t===null?(It._3=st.right(It._1(st.fromRight(Tt))),Tt=It._3):It._3=$t;break;case O:if(Zt=It._1._3,nr=It._2._3,$t){if(It._3=$t,Ir=!0,se=pr++,Xt[se]=Br(hr,$t===Zt?It._2:It._1,function(){return function(){delete Xt[se],Ir?Ir=!1:Kt===null?va($t,null,null):va($t,Kt._1,Kt._2)}}),Ir){Ir=!1;return}}else{if(Zt===t||nr===t)return;Tt=st.right(st.fromRight(Zt)(st.fromRight(nr))),It._3=Tt}break;case H:if(Zt=It._1._3,nr=It._2._3,Zt===t&&st.isLeft(nr)||nr===t&&st.isLeft(Zt))return;if(Zt!==t&&st.isLeft(Zt)&&nr!==t&&st.isLeft(nr))$t=Tt===Zt?nr:Zt,Tt=null,It._3=$t;else if(It._3=Tt,Ir=!0,se=pr++,Xt[se]=Br(hr,Tt===Zt?It._2:It._1,function(){return function(){delete Xt[se],Ir?Ir=!1:Kt===null?va(Tt,null,null):va(Tt,Kt._1,Kt._2)}}),Ir){Ir=!1;return}break}Kt===null?It=null:(It=Kt._1,Kt=Kt._2)}}function an(wr){return function(It){return function(){delete ut[wr._1],wr._3=It,va(It,wr._2._1,wr._2._2)}}}function Tu(){var wr=Nr,It=Mr,Kt=null,$t=null,Tt,Zt;t:for(;;)switch(Tt=null,Zt=null,wr){case Nr:switch(It.tag){case T:Kt&&($t=new J(W,Kt,$t)),Kt=new J(T,It._1,t,t),It=It._2;break;case O:Kt&&($t=new J(W,Kt,$t)),Kt=new J(O,t,It._2,t),It=It._1;break;case H:Kt&&($t=new J(W,Kt,$t)),Kt=new J(H,t,It._2,t),It=It._1;break;default:Zt=St++,wr=Te,Tt=It,It=new J(Z,Zt,new J(W,Kt,$t),t),Tt=wi(st,ir,Tt),Tt.onComplete({rethrow:!1,handler:an(It)})(),ut[Zt]=Tt,ir&&ir.register(Tt)}break;case Te:if(Kt===null)break t;Kt._1===t?(Kt._1=It,wr=Nr,It=Kt._2,Kt._2=t):(Kt._2=It,It=Kt,$t===null?Kt=null:(Kt=$t._1,$t=$t._2))}for(mr=It,Zt=0;Zt<St;Zt++)ut[Zt].run()}function xu(wr,It){ne=st.left(wr);var Kt;for(var $t in Xt)if(Xt.hasOwnProperty($t)){Kt=Xt[$t];for($t in Kt)Kt.hasOwnProperty($t)&&Kt[$t]()}Xt=null;var Tt=Br(wr,mr,It);return function(Zt){return new J(f,function(nr){return function(){for(var Ir in Tt)Tt.hasOwnProperty(Ir)&&Tt[Ir]();return qr}})}}return Tu(),function(wr){return new J(f,function(It){return function(){return xu(wr,It)}})}}function Uy(st,ir,Mr){return new J(f,function(lr){return function(){return By(st,ir,Mr,lr)}})}return J.EMPTY=t,J.Pure=Cr(r),J.Throw=Cr(e),J.Catch=Cr(n),J.Sync=Cr(u),J.Async=Cr(f),J.Bind=Cr(l),J.Bracket=Cr(_),J.Fork=Cr(v),J.Seq=Cr(k),J.ParMap=Cr(T),J.ParApply=Cr(O),J.ParAlt=Cr(H),J.Fiber=wi,J.Supervisor=bt,J.Scheduler=B,J.nonCanceler=qr,J}(),qk=ze.Pure,zk=ze.Throw;function Vk(t){return function(r){return ze.Catch(t,r)}}function Gk(t){return function(r){return r.tag===ze.Pure.tag?ze.Pure(t(r._1)):ze.Bind(r,function(e){return ze.Pure(t(e))})}}function jk(t){return function(r){return ze.Bind(t,r)}}var Xk=ze.Sync;var Bo=ze.Async;function Jk(t,r){return function(){return ze.Fiber(t,null,r)}}var Fx=function(){function t(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function r(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return ze.Async(function(u){return function(){var f=t(n,u(e()));return function(){return ze.Sync(function(){return e(r(n,f))})}}})}}(),Tx=ze.Seq;var Ux=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}};var Wx=ur(z);var C_={map:Gk};var Hx=function(){var t=function(n){if(n instanceof ct)return n.value0;if(n instanceof pt)return Vu("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},r=function(n){if(n instanceof pt)return n.value0;if(n instanceof ct)return Vu("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof pt)return!0;if(n instanceof ct)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:r,fromRight:t,left:pt.create,right:ct.create}}(),qx=function(t){return Jk(Hx,t)},zx=function(t){return function(){var e=qx(t)();return e.run(),e}},h_=function(t){return Wx(zx(t))};var F_={Applicative0:function(){return yc},Bind1:function(){return T_}},T_={bind:jk,Apply0:function(){return Zk(0)}},yc={pure:qk,Apply0:function(){return Zk(0)}},Zk=Ux("applyAff","Effect.Aff",function(){return{apply:Ue(F_),Functor0:function(){return C_}}});var Vx=V(yc);var x_={liftEffect:Xk,Monad0:function(){return F_}};var Gx={throwError:zk,Monad0:function(){return F_}},tA={catchError:Vk,MonadThrow0:function(){return Gx}};var rA=N(Vx(void 0));var eA=function(t){return Bo(function(r){return function(){var n=t(function(u){return r(pt.create(u))()},function(u){return r(ct.create(u))()});return function(u){return Bo(function(f){return function(){return n(u,function(_){return f(pt.create(_))()},function(_){return f(ct.create(_))()}),rA}})}}})};function Sc(t){return Object.prototype.toString.call(t).slice(8,-1)}var nA=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var uA=function(t){return function(r){return function(e){return(e|0)===e?t(e):r}}},Me=function(t){return t};var $c=isFinite;var E_=Math.floor;var Uo=function(t){return function(r){return t%r}};var aA=Un(Wi),iA=cu(Wi);var Cc=function(){return uA(s.create)(P.value)}(),tE=function(t){if(!$c(t))return 0;if(t>=Me(aA))return aA;if(t<=Me(iA))return iA;if(Ur)return ie(0)(Cc(t));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[t.constructor.name])};var w_=function(t){return tE(E_(t))};var oE=Dt(je),fE=Dt(kn);var I_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mA=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),cE=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),pE=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),ca=rt,lE=rt;var Fc=function(t){if(t instanceof I_)return t.value0;if(t instanceof cE)return"Error at array index "+(fE(t.value0)+(": "+Fc(t.value1)));if(t instanceof pE)return"Error at property "+(oE(t.value0)+(": "+Fc(t.value1)));if(t instanceof mA)return"Type mismatch: expected "+(t.value0+(", found "+t.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[t.constructor.name])};var L_=function(t){var r=In(gk(t));return function(e){return r(Uk(e))}};var bA=function(t){var r=V(Oo(t)),e=L_(t);return function(n){return function(u){if(Sc(u)===n)return r(lE(u));if(Ur)return e(new mA(n,Sc(u)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,u.constructor.name])}}};var P_=V(Oo(We)),vE=L_(We),Pa=bA(We),DA=Ht(Sk(Cm)(We)),sE=tf(d_(We)),Tc=R(Fr),mE=Bu(wt)(An),bE=Ct(Nn),DE=pu(de),kE=R(Dr),AE=on(C_),dE=_c(tA),yE=V(yc);var O_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),R_=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),N_=function(){function t(){}return t.value=new t,t}(),B_=function(){function t(){}return t.value=new t,t}(),U_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),kA=function(t){return function(r){var e=function(T){return T===""?P_(Ck):ye(function(O){return vE(I_.create(O))})(P_)(Tk(T))},n=function(){if(r.responseFormat instanceof v_)return Pa("ArrayBuffer");if(r.responseFormat instanceof s_)return Pa("Blob");if(r.responseFormat instanceof m_)return function(T){return DA(Pa("Document")(T))(DA(Pa("XMLDocument")(T))(Pa("HTMLDocument")(T)))};if(r.responseFormat instanceof To)return sE(function(T){return r.responseFormat.value0(e(T))})(Pa("String"));if(r.responseFormat instanceof b_)return Pa("String");if(r.responseFormat instanceof pc)return N(r.responseFormat.value0(P_(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[r.responseFormat.constructor.name])}(),u=function(T){if(T instanceof nk)return new ct(T.value0(ca));if(T instanceof uk)return new ct(ca(T.value0));if(T instanceof ak)return new ct(ca(T.value0));if(T instanceof ik)return new ct(ca(T.value0));if(T instanceof ok)return new ct(ca(T.value0));if(T instanceof p_)return Kc("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(Tc(ca)(Ik(T.value0)));if(T instanceof l_)return new ct(ca(y_(T.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[T.constructor.name])},f=function(T){return function(O){return T instanceof s&&!mE(Pi(bE)(__)(T.value0))(O)?$f(O)(T.value0):O}},l=function(T){return f(Tc(cc.create)(DE(fk)(T)))(f(Tc(fc.create)(sk(r.responseFormat)))(r.headers))},_=function(T){return{method:Nk(r.method),url:r.url,headers:kE(function(O){return{field:__(O),value:lk(O)}})(l(r.content)),content:T,responseType:vk(r.responseFormat),username:Fi(r.username),password:Fi(r.password),withCredentials:r.withCredentials,timeout:ie(0)(Tc(function(O){return O})(r.timeout))}},v=function(T){return AE(dE(eA(tk(t,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",kk.create,_(T)))))(function(O){if(O instanceof ct){var H=$k(n(O.value0.body));if(H instanceof pt)return new pt(new R_(Wk(H.value0),O.value0));if(H instanceof ct)return new ct({body:H.value0,headers:O.value0.headers,status:O.value0.status,statusText:O.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[H.constructor.name])}if(O instanceof pt)return new pt(function(){var W=xo(O.value0),p=W==="AffjaxTimeoutErrorMessageIdent";if(p)return N_.value;var m=W==="AffjaxRequestFailedMessageIdent";return m?B_.value:new U_(O.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[O.constructor.name])})};if(r.content instanceof P)return v(Fi(P.value));if(r.content instanceof s){var k=u(r.content.value0);if(k instanceof ct)return v(Fi(new s(k.value0)));if(k instanceof pt)return yE(new pt(new O_(k.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[k.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[r.content.constructor.name])}},W_=function(t){if(t instanceof O_)return"There was a problem with the request content: "+t.value0;if(t instanceof R_)return"There was a problem with the response body: "+Fc(t.value0);if(t instanceof N_)return"There was a problem making the request: timeout";if(t instanceof B_)return"There was a problem making the request: request failed";if(t instanceof U_)return"There was a problem making the request: "+xo(t.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[t.constructor.name])},pa=function(){return{method:new pt(No.value),url:"/",headers:[],content:P.value,username:P.value,password:P.value,withCredentials:!1,responseFormat:bk,timeout:P.value}}();var H_={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(t){return t||"/"}};var dA=kA(H_);var $E=gt(T_),yA=Ln(x_),gA=ve(),CE=Gr({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(gA(_e()(gA(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),q_=Ze(Kn),Ho=V(Yt),SA=Rt(Zr),xc=Ht($r),z_=K(Er),$A=Rt(lD),hE=Du(Do),FE=Yu(De),TE=Lr(wt)(b),CA=kr(Pr),xE=Rt(Yr);var FA=function(){function t(){}return t.value=new t,t}(),V_=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),EE=function(){return nt.value}(),hA="Click to get some random user data.",ME=function(t){return dr(N(function(){return t(FA.value)(),h_($E(dA({method:new pt(No.value),url:"https://randomuser.me/api/",headers:pa.headers,content:pa.content,username:pa.username,password:pa.password,withCredentials:pa.withCredentials,responseFormat:mk,timeout:pa.timeout}))(function(e){if(e instanceof pt)return yA(t(new V_("GET /api response failed to decode: "+W_(e.value0))));if(e instanceof ct)return yA(t(new V_(g_(2)(e.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 44, column 9 - line 51, column 48): "+[e.constructor.name])}))()}))},TA=function(t){return CE(EE)({code:Rr([Or([D(n_)])]),result:mi(function(r){return function(e){var n=q_(function(l){return l instanceof FA?new s(new pt(void 0)):l instanceof V_?new s(new ct(l.value0)):P.value})(e),u=q_(function(l){return l instanceof ct?new s(l.value0):P.value})(n),f=q_(function(l){return l instanceof pt?new s(void 0):P.value})(n);return br([br([he(Ho(SA(yr.value)(ME(r))))([tn(xc(Ho(hA))(xc(z_(f)("Loading..."))(z_(u)(hA))))])]),tc(xc(Ho($A(ke.value)("display: none;")))(z_(hE(FE(function(l){return function(_){return new X(l&&!1,function(){return l?new s(void 0):P.value}())}})(!0)(u)))($A(ke.value)("display: block;"))))([Rr([Or([tn(xc(Ho(""))(u))])])])])}}),next:TE(Ho)([SA(yr.value)(dr(function(r){return CA(CA(jr(r))(t.dpage(yi.value)))(le)})),xE(Hr.value)(t.slug+"pursx2/")])})};var xA=d(),Oa=function(t){return function(r){return new y(C("input")(t)(xA(S(xA(h($)(r))))))}};var j_=function(){function t(){}return t.value=new t,t}(),EA={attr:function(t){return function(r){return a({key:"controls",value:c(r)})}}};var qo=function(){function t(){}return t.value=new t,t}();var Ec={attr:function(t){return function(r){return a({key:"input",value:Y(r)})}}};var Mc=function(){function t(){}return t.value=new t,t}();var X_={attr:function(t){return function(r){return a({key:"keyup",value:Y(r)})}}};var J_=function(){function t(){}return t.value=new t,t}();var IA={attr:function(t){return function(r){return a({key:"src",value:c(r)})}}};var zo=function(){function t(){}return t.value=new t,t}();var LA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var PA={attr:function(t){return function(r){return a({key:"type",value:c(r)})}}};var RA=d(),NA=function(t){return function(r){return new y(C("p")(t)(RA(S(RA(h($)(r))))))}},K_=NA(A(b));var BA=d(),Q_=function(t){return function(r){return new y(C("source")(t)(BA(S(BA(h($)(r))))))}};var UA=d(),Y_=function(t){return function(r){return new y(C("video")(t)(UA(S(UA(h($)(r))))))}};function wc(t){return function(){return t.value}}function Z_(t){return function(){return t.valueAsNumber}}function HA(t,r,e,n){if(typeof window<"u"){var u=window[e];if(u!=null&&n instanceof u)return r(n)}for(var f=n;f!=null;){var l=Object.getPrototypeOf(f),_=l.constructor.name;if(_===e)return r(n);if(_==="Object")return t;f=l}return t}var lt=function(t){return function(r){return HA(P.value,s.create,t,r)}};var Ic=lt("HTMLInputElement");function tv(t){return t.code}var rv=lt("KeyboardEvent");var VA=R(Er),JE=Rt(Ec),KE=Je(ge)(Ke),QE=gt(de),YE=rf(ga),GA=V(Yt),ZE=Ht($r),tM=Rt(PA);var Lc=function(){var t=ZE(GA(tM(zo.value)("range"))),r=VA(function(e){return JE(qo.value)(dr(function(n){return KE(QE(ic(n))(Ic))(YE(Z_)(e))}))});return function(e){return t(r(e))}}();var ev=function(t){return VA(Rt(t)(yr.value))},Pc=function(t){var r=ev(t);return function(e){return r(GA(e))}};var jA=ve(),rM=Gr({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(jA(_e()(jA(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),eM=Kf()(fi({reflectSymbol:function(){return"buttonClicked"}})()()(fi({reflectSymbol:function(){return"sliderMoved"}})()()(Wf)()())()()),nM=Pc(aa),uv=Ht($r),Vo=V(Yt),XA=R(Er),JA=at(wu),uM=Dt(kn),aM=Qu(De),iM=Dt(Hi),oM=Lr(wt)(b),fM=Rt(Zr),KA=kr(Pr),cM=Rt(Yr),pM=function(){return nt.value}(),QA=function(t){return rM(pM)({code:Rr([Or([D(e_)])]),result:eM(nt.value)(function(r){return function(e){return br([he(nM(r.buttonClicked(void 0)))([D("Click")]),br([tn(uv(Vo("Val: 0"))(XA(function(){var n=JA("Val: ");return function(u){return n(uM(u))}}())(aM(function(n){return function(u){return 1+n|0}})(-1)(uv(Vo(void 0))(e.buttonClicked)))))]),br([Oa(Lc(Vo(r.sliderMoved)))([]),br([tn(uv(Vo("Val: 50.0"))(XA(function(){var n=JA("Val: ");return function(u){return n(iM(u))}}())(e.sliderMoved)))])])])}}),next:oM(Vo)([fM(yr.value)(dr(function(r){return KA(KA(jr(r))(t.dpage(Si.value)))(le)})),cM(Hr.value)(t.slug+"effects/")])})};var Oc=function(t){return function(r){return t(r)}};var _M=Ht($r),vM=V(Yt);var sM=xa(De);var mM=function(t){return function(r){return sM(Oc(function(e){return Ia(Nu(e))})(function(e){return _M(vM(uD(t)(r({remove:e.value0(nD),sendTo:function(n){return e.value0(eD(n))}}))))(e.value1)}))}},ZA=mM(0);var td=ve(),DM=Gr({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(td(_e()(td(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),kM=Be(Ee),Rc=Ht($r),nu=V(Yt),rd=Lr(wt)(b),AM=Rt(pD),dM=Rt(Ec),ed=Je(ge)(Ke),yM=gt(de),gM=rf(ga),SM=Rt(X_),$M=ou(ge),av=Rt(_D),nd=Rt(Zr),CM=R(Er),hM=Rt(Di),ud=ev(aa),FM=Ze(Kn),TM=Yu(De),ad=kr(Pr),xM=Rt(Yr);var EM=function(){function t(){}return t.value=new t,t}(),iv=function(){function t(){}return t.value=new t,t}(),id=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),MM=function(){return nt.value}(),od=function(t){return DM(MM)({code:Rr([Or([D(r_)])]),result:mi(function(r){return kM(function(e){return Rc(nu(EM.value))(e)})(function(e){return br([br([Oa(rd(nu)([AM(ke.value)("border-style:solid;border-width: 1px;border-color: black;"),dM(qo.value)(dr(function(n){return ed(yM(ic(n))(Ic))(gM(wc)(function(u){return r(id.create(u))}))})),SM(Mc.value)(dr(function(n){return ed(rv(n))(function(u){return $M(tv(u)==="Enter")(r(iv.value))})}))]))([]),he(Rc(nu(av(ke.value)("margin: 5px;")))(nu(nd(yr.value)(dr(N(r(iv.value)))))))([D("Add")])]),ua(CM(function(n){return Oc(ZA)(function(u){return br([oa(nu(hM(ke.value)("margin: 5px;")))([D(n)]),he(Rc(nu(av(ke.value)("margin: 5px;")))(ud(nu(u.sendTo(0)))))([D("Prioritize")]),he(Rc(nu(av(ke.value)("margin: 5px;")))(ud(nu(u.remove))))([D("Delete")])])})})(FM(function(n){return n.value0?new s(n.value1):P.value})(TM(function(n){return function(u){return u instanceof id?new X(u.value0,new X(!1,u.value0)):u instanceof iv?new X(n,new X(!0,n)):new X("",new X(!1,""))}})("")(e))))])})}),next:rd(nu)([nd(yr.value)(dr(function(r){return ad(ad(jr(r))(t.dpage(Ci.value)))(le)})),xM(Hr.value)(t.slug+"portals/")])})};var fd=ve(),IM=Gr({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(fd(_e()(fd(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),LM=Lr(wt)(b),PM=V(Yt),OM=Rt(Zr),cd=kr(Pr),RM=Rt(Yr),NM=function(){return nt.value}(),pd=function(t){return IM(NM)({code:Rr([Or([D(t_)])]),result:br([D("Hello world")]),next:LM(PM)([OM(yr.value)(dr(function(r){return cd(cd(jr(r))(t.dpage(Ai.value)))(le)})),RM(Hr.value)(t.slug+"component/")])})};var UM=Gr({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(_e()(Vr)({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})),WM=Lr(wt)(b),HM=V(Yt),qM=Rt(Zr),ld=kr(Pr),zM=Rt(Yr),VM=function(){return nt.value}(),_d=function(t){return UM(VM)({next:WM(HM)([qM(yr.value)(dr(function(r){return ld(ld(jr(r))(t.dpage(ki.value)))(le)})),zM(Hr.value)(t.slug+"hello/")])})};var vd=ve(),jM=Gr({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(vd(_e()(vd(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),XM=Be(Ee),JM=Ht($r),Ei=V(Yt),KM=fD(),QM=R(pi),ov=Lr(wt)(b),YM=Rt(EA),ZM=Rt(CD),tw=Rt(IA),rw=Rt(LA),sd=Eb()(),ew=jf({reflectType:function(){return 1}})()()(),nw=jf({reflectType:function(){return 0}})()()(),uw=Qu(De),aw=V(sa),md=Rt(Zr),bd=kr(Pr),iw=Rt(Yr);var ow=function(){return nt.value}(),Dd=function(t){return jM(ow)({code:Rr([Or([D(Zl)])]),result:ua(Ia(function(r){return XM(JM(Ei(void 0)))(function(e){return Ei(si(KM(QM(function(n){return Y_(ov(Ei)([YM(j_.value)("true"),ZM(Fo.value)("250")]))([Q_(ov(Ei)([tw(J_.value)(n),rw(zo.value)("video/mp4")]))([])])})(sd("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(sd("https://www.w3schools.com/jsref/movie.mp4")(xb))))(function(n){var u=ew(nt.value)(n.value0),f=nw(nt.value)(n.value0),l=function(v){return uw(function(k){return function(T){return!k}})(v)(e)},_=function(){var v=Zf(function(k){return k?f:u});return function(k){return ho(aw(v(l(k))))}}();return br([he(Ei(md(yr.value)(dr(N(r(void 0))))))([D("Switch videos")]),br([_(!0),_(!1)])])})))})})),next:ov(Ei)([md(yr.value)(dr(function(r){return bd(bd(jr(r))(t.dpage(hi.value)))(le)})),iw(Hr.value)(t.slug+"ssr/")])})};var kd=ve(),cw=Gr({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(kd(_e()(kd(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),pw=VD({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <svg height="100" width="100">
      <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
    </svg> 
    </div>
`}})()(Vr),lw=Lr(wt)(b),_w=V(Yt),vw=Rt(Zr),Ad=kr(Pr),sw=Rt(Yr),mw=function(){return nt.value}(),bw=function(){return nt.value}(),dd=function(t){return cw(mw)({code:Rr([Or([D(Yl)])]),result:pw(bw),next:lw(_w)([vw(yr.value)(dr(function(r){return Ad(Ad(jr(r))(t.dpage(gi.value)))(le)})),sw(Hr.value)(t.slug+"events1/")])})};var gd=ve(),Sd=_e(),$d=gd(Vr),kw=Kl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(gd(Sd($d({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}}))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})),Go=V(Yt),Aw=Gr({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(Sd($d({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}}))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})),dw=Rt(cD),yw=Rt(aa),gw=Ht($r),Sw=K(Er),$w=Du(Do),Cw=Lr(wt)(b),hw=Rt(Zr),yd=kr(Pr),Fw=Rt(Yr),Tw=function(){return nt.value}(),xw=function(){return nt.value}(),Cd=function(t){return kw(nt.value)(Tw)({code:Rr([Or([D(Ql)])]),result:ua(Ia(function(r){return function(e){return Go(si(Aw(xw)({myli:Go(dw(ke.value)("background-color:rgb(200,240,210);")),somethingNew:he(Go(yw(yr.value)(r(new s(void 0)))))([tn(gw(Sw($w(e))("Thanks for clicking me!"))(Go("I was dynamically inserted")))])})))}})),next:Cw(Go)([hw(yr.value)(dr(function(r){return yd(yd(jr(r))(t.dpage($i.value)))(le)})),Fw(Hr.value)(t.slug+"events2/")])})};var fv=()=>document.documentElement.querySelector("[data-deku-root]");var cv=t=>()=>{t.hydrating=!0},pv=t=>()=>{t.hydrating=!1},hd=t=>r=>e=>()=>{if(e.units[r.id]){let n=e.units[r.parent].main;e.units[r.id].main&&e.units[r.id].main.parentNode||e.units[r.id].startBeacon&&e.units[r.id].startBeacon.parentNode||(r.ez?(()=>(e.units[r.id].main?n.appendChild(e.units[r.id].main):(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)),!0))():t(r.pos)(f=>()=>t(r.dynFamily)(l=>()=>{for(var _=0,v=0,k;v<n.childNodes.length;){if(n.childNodes[v].nodeType===8&&n.childNodes[v].nodeValue==="%-%"+l){v+=1;break}v++}let T=H=>{let W=n.childNodes[H];e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,W),n.insertBefore(e.units[r.id].endBeacon,W)):n.insertBefore(e.units[r.id].main,W)};for(;v<n.childNodes.length;){var O;if((O=n.childNodes[v].$dekuId)&&t(e.units[O].dynFamily)(W=>()=>t(e.units[O].pos)(m=>()=>l===W&&f<=m?(T(v),!0):!1)())())return!0;if(_===f||n.childNodes[v].nodeType===8&&n.childNodes[v].nodeValue==="%-%"+l+"%-%")return T(v),!0;n.childNodes[v].nodeType===8&&n.childNodes[v].nodeValue.substring(0,3)==="%-%"&&!k&&(k=n.childNodes[v].nodeValue+"%-%"),k||_++,n.childNodes[v].nodeType===8&&n.childNodes[v].nodeValue===k&&(k=void 0,_++),v++}return!1})())())||(r.parent.indexOf("@!%")!==-1?t(r.dynFamily)(l=>()=>(e.units[r.id].main?e.units[l].endBeacon.parentNode.insertBefore(e.units[r.id].main,e.units[l].endBeacon):(e.units[l].endBeacon.parentNode.insertBefore(e.units[r.id].endBeacon,e.units[l].endBeacon),e.units[l].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon)),!0))()||(e.units[r.id].main?n.parentNode.replaceChild(e.units[r.id].main,n):(n.parentNode.replaceChild(e.units[r.id].endBeacon,n),e.units[r.id].endBeacon.parentNode.insertBefore(e.units[r.id].startBeacon,e.units[r.id].endBeacon))):t(r.dynFamily)(l=>()=>(e.units[r.id].startBeacon?(n.insertBefore(e.units[r.id].startBeacon,e.units[l].endBeacon),n.insertBefore(e.units[r.id].endBeacon,e.units[l].endBeacon)):n.insertBefore(e.units[r.id].main,e.units[l].endBeacon),!0))()||(e.units[r.id].startBeacon?(n.appendChild(e.units[r.id].startBeacon),n.appendChild(e.units[r.id].endBeacon)):n.appendChild(e.units[r.id].main)))}},lv=t=>()=>{function r(){return NodeFilter.FILTER_ACCEPT}function e(n){for(var u=document.createNodeIterator(n,NodeFilter.SHOW_COMMENT,r,!1),f;f=u.nextNode();)f.nodeValue.substring(0,3)==="%-%"&&(t.allBeacons[f.nodeValue.substring(3)]=f)}e(document.documentElement)},Fd=t=>r=>e=>n=>()=>{var u,f,l=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(l),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=n.allBeacons[e.id])&&(f=n.allBeacons[`${e.id}%-%`])?(n.units[l]={listeners:{},parent:e.parent,scope:e.scope,pos:e.pos,dynFamily:e.dynFamily,startBeacon:u,endBeacon:f},u.$dekuId=l,f.$dekuId=l,!0):!1)()){let v=document.createComment(`%-%${e.id}`),k=document.createComment(`%-%${e.id}%-%`);n.units[l]={listeners:{},parent:e.parent,dynFamily:e.dynFamily,scope:e.scope,pos:e.pos,startBeacon:v,endBeacon:k},v.$dekuId=l,k.$dekuId=l}},ww=new Set(["animate","animateMotion","animateTransform","circle","clipPath","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","title","tspan","use","view"]);var Td=t=>r=>()=>r.units[t]&&r.units[t].dynFamily?r.units[t].dynFamily:(()=>{throw new Error(`No positional information for ${t}`)})(),xd=t=>r=>()=>r.units[t]&&r.units[t].main&&r.units[t].main.parentNode&&r.units[t].main.parentNode.$dekuId?r.units[t].main.parentNode.$dekuId:r.units[t]&&r.units[t].startBeacon&&r.units[t].startBeacon.parentNode&&r.units[t].startBeacon.parentNode.$dekuId?r.units[t].startBeacon.parentNode.$dekuId:(()=>{throw new Error(`No parent information for ${t}`)})(),Ed=t=>r=>()=>r.units[t]&&r.units[t].scope?r.units[t].scope:(()=>{throw new Error(`No scope information for ${t}`)})(),Md=t=>r=>e=>n=>()=>{var u,f=e.id;if(n.scopes[e.scope]||(n.scopes[e.scope]=[]),n.scopes[e.scope].push(f),!t(e.parent)(()=>()=>n.hydrating&&r&&(u=document.documentElement.querySelector(`[data-deku-ssr="${f}"]`))?(n.units[f]={listeners:{},pos:e.pos,parent:e.parent,scope:e.scope,dynFamily:e.dynFamily,main:u},u.$dekuId=f,!0):!1)()){let _=ww.has(e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag);n.units[f]={listeners:{},parent:e.parent,pos:e.pos,scope:e.scope,dynFamily:e.dynFamily,main:_},_.$dekuId=f}},wd=t=>r=>e=>n=>u=>()=>{var f=n.id,l;if(u.scopes[n.scope]||(u.scopes[n.scope]=[]),u.scopes[n.scope].push(f),!t(n.parent)(v=>()=>{if(u.hydrating&&r&&(l=document.documentElement.querySelector(`[data-deku-ssr="${v}"]`))){for(var k=0;k<l.childNodes.length;k++){let H=f.split("@-@");if(l.childNodes[k].nodeType===8&&l.childNodes[k].nodeValue===H[0]){var T=k===0||l.childNodes[k-1].nodeType!==3;T&&k!==0?l.insertBefore(document.createTextNode(""),l.childNodes[k]):T?l.prepend(document.createTextNode("")):k=k-1;break}}let O=l.childNodes[k];return u.units[f]={main:O,pos:n.pos,parent:n.parent,scope:n.scope},O.$dekuId=f,!0}return!1})()){let v=document.createTextNode("");u.units[f]={main:v,parent:n.parent,scope:n.scope,pos:n.pos,dynFamily:n.dynFamily},v.$dekuId=f}};function _v(){return{units:{},scopes:{},allBeacons:{}}}var Id=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.tagName==="INPUT"&&r.key==="value"||e.units[n].main.tagName==="TEXTAREA"&&r.key==="value"?e.units[n].main.value=u:e.units[n].main.tagName==="INPUT"&&r.key==="checked"?e.units[n].main.checked=u==="true":r.key==="disabled"?e.units[n].main.disabled=u==="true":e.units[n].main.setAttribute(r.key,u)}},Ld=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id,u=r.value;if(e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),r.key==="@self@")u(e.units[n].main)();else{e.units[n].listeners[r.key]&&e.units[n].main.removeEventListener(r.key,e.units[n].listeners[r.key]);var f=l=>u(l)();e.units[n].main.addEventListener(r.key,f),e.units[n].listeners[r.key]=f}}},Pd=t=>r=>e=>()=>{if(e.units[r.id]){var n=r.id;e.hydrating&&t&&!e.units[n]&&(dom=document.documentElement.querySelector(`[data-deku-ssr="${n}"]`))&&(e.units[n]={listeners:{},parent:r.parent,scope:r.scope,main:dom},e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(n)),e.units[n].main.removeAttribute(r.key)}},Od=t=>r=>()=>{if(r.units[t.id]){var e=t.id;r.units[e].main.nodeValue=t.text}},Rd=t=>r=>e=>n=>u=>()=>{var f,l,_=n.id,v=n.html,k=n.verb,T=n.cache,O=n.parent,H=n.scope,W=n.pxScope;let p=t(n.parent)(()=>()=>u.hydrating&&r&&(f=document.documentElement.querySelector(`[data-deku-ssr="${_}"]`))?(u.units[_]={listeners:{},pos:n.pos,scope:H,parent:O,main:f},f.$dekuId=_,!0):!1)();if(!p){let Q=Object.entries(T);for(var m=0;m<Q.length;m++){let ot=Q[m][0];Q[m][1]===!0?v=v.replace(k+ot+k,'data-deku-attr-internal="'+ot+'"'):v=v.replace(k+ot+k,'<span style="display:contents;" data-deku-elt-internal="'+ot+'"></span>')}l=document.createElement("div"),l.innerHTML=v.trim(),u.units[_]={listeners:{},pos:n.pos,scope:H,parent:O,main:l.firstChild},l.firstChild.$dekuId=_}u.scopes[H]||(u.scopes[H]=[]),u.scopes[H].push(_),l||(l=f),l.querySelectorAll("[data-deku-attr-internal]").forEach(function(Q){var ot=Q.getAttribute("data-deku-attr-internal");let Z=ot+"@!%"+W;u.units[Z]={listeners:{},main:Q,scope:H},u.scopes[H].push(Z)}),l.querySelectorAll("[data-deku-elt-internal]").forEach(function(Q){var ot=Q.getAttribute("data-deku-elt-internal");let Z=ot+"@!%"+W;u.units[ot+"@!%"+W]={listeners:{},main:Q,scope:H},u.scopes[H].push(Z)}),p||u.units[_].main.remove()},Nd=t=>r=>()=>{var e=t.id;r.units[e]={main:t.root},t.root.$dekuId=e},vv=t=>r=>e=>n=>()=>{let u=(p,m,Q)=>{if(n.units[p].startBeacon){var ot=n.units[p].startBeacon,Z=ot.nextSibling;for(n.units[m].main.insertBefore(ot,Q),ot=Z;ot&&ot!==n.units[p].endBeacon;)Z=ot.nextSibling,n.units[m].main.insertBefore(ot,Q),ot=Z}else n.units[m].main.insertBefore(n.units[p].main,Q)},f=[];f.push(e);for(var l=0;l<f.length;l++){let p=f[l],m=p.id,Q=p.parent;n.units[m].containingScope=p.scope;var _=void 0;r(p.pos)(Z=>()=>(_=Z,!0))(),_===void 0&&(_=Number.MAX_VALUE);let ot=n.units[Q].main.childNodes;for(var v=0,k=!1,T=0;v<ot.length;){var O;if(O=ot[v].$dekuId){if(r(p.dynFamily)(tr=>()=>k?!1:n.units[O].endBeacon===ot[v]&&tr===O?(n.units[m].pos=t(T),u(m,Q,ot[v]),!0):!1)()){k=!0;break}if(n.units[O].dynFamily!==n.units[m].dynFamily){v++;continue}if(k){v++;continue}T===_?(u(m,Q,ot[v]),T++,k=!0):n.units[O].endBeacon!==ot[v]&&(n.units[O].pos=t(T),T++)}v++}if(k)return;if(n.units[m].main)n.units[Q].main.appendChild(n.units[m].main);else{var H=n.units[m].startBeacon,W=H.nextSibling;for(n.units[Q].main.appendChild(H),H=W;H&&H!==n.units[m].endBeacon;)W=H.nextSibling,n.units[Q].main.appendChild(H),H=W}}},Bd=t=>r=>()=>{if(r.units[t.id]){var e=t.id;if(r.units[e].containingScope&&!t.scopeEq(r.units[e].containingScope)(t.scope))return;if(r.units[e].main)r.units[e].main.remove();else{let f=document.createElement("div");var n=r.units[e].startBeacon,u=n.nextSibling;for(f.appendChild(n),n=u;n&&n!==r.units[e].endBeacon;)u=n.nextSibling,f.appendChild(n),n=u;n===r.units[e].endBeacon&&f.appendChild(n)}}},sv=t=>r=>()=>{r.units[t.id]&&delete r.units[t.id]},Ud=sv;var Rw=zi(nf),Nw=Ne();var Wd=function(t){return t};var Bw=1,mv=2147483647,Uw=function(){return mv-1|0}(),bv=function(t){var r=function(e){return function(n){return function(u){var f=n-e|0,l=Rw(u)(f),_=l<e;return _?l+n|0:l}}};return r(Bw)(Uw)(t)};var Ww=0,Hw=48271,Hd=function(t){return function(r){return Nw(Cc(Uo(Me(Hw)*Me(r)+Me(t))(Me(mv))))}},qd=Hd(Ww);var jo=function(t){var r=R(t);return{map:function(e){return function(n){return function(u){return r(function(f){return new X(e(f.value0),f.value1)})(n(u))}}}}};var kv=function(t){return{Applicative0:function(){return Uc(t)},Bind1:function(){return Nc(t)}}},Nc=function(t){var r=gt(t.Bind1());return{bind:function(e){return function(n){return function(u){return r(e(u))(function(f){var l=n(f.value0);return l(f.value1)})}}},Apply0:function(){return Bc(t)}}},Bc=function(t){var r=jo(t.Bind1().Apply0().Functor0());return{apply:Ue(kv(t)),Functor0:function(){return r}}},Uc=function(t){var r=V(t.Applicative0());return{pure:function(e){return function(n){return r(new X(e,n))}},Apply0:function(){return Bc(t)}}};var Wc=function(t){var r=V(t.Applicative0()),e=kv(t);return{state:function(n){return function(u){return r(n(u))}},Monad0:function(){return e}}};var Kd=function(t){return function(r){var e=t(r);return e.value1}},Qd=function(t){return function(r){var e=t(r);return e.value0}};var i0=Wc(We),o0=Qn(i0);var f0=jo(_u);var c0=Re(Bi);var p0=ue(Bi);var l0=function(t){return t};var _0=function(){var t=function(r){return new X(Wd(r.newSeed),function(){var e={};for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e.newSeed=qd(r.newSeed),e}())};return o0(t)}();var ty=f0,Hc=R(ty);var dv=function(t){return Qd(l0(t))};var ry=Bc(We),v0=Gt(ry),Zd=function(t){return function(r){var e=Me(r),n=Me(t),u=function(_){return n+Uo(_)(e-n+1)},f=Hc(Me)(_0),l=v0(Hc(p0)(f))(Hc(c0(2))(f));return Hc(function(_){return w_(u(_))})(l)}},ey=function(t){return function(r){var e=t<=r;return e?Zd(t)(r):Zd(r)(t)}};var uy=function(t){return t.arbitrary};var ay=function(){return{arbitrary:ey(-1e6)(1e6)}}();var we=ur(fe),en=at(Kr),oy=Dt(kn),fy=uy(ay),cy=ue(ma),iy=V(Sr),m0=V(ge),nn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),un=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ie=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ae=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),mn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),bn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Pn=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),hu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),yv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),qc=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),gv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Sv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),$v=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Cv=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),uu=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),Ve=function(){function t(r){this.value0=r}return t.create=function(r){return new t(r)},t}(),b0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new hu(t))])})(r))}},D0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new Pn(t))])})(r))}},k0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new bn(t))])})(r))}},A0=function(t){return function(r){return we(xr(function(e){return en(e)([new Ve(new yv(t))])})(r))}},d0=function(t){return function(r){return we(xr(function(e){return en(e)([new Ve(new $v(t))])})(r))}},y0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new un(t))])})(r))}},g0=function(t){return function(r){return we(xr(function(e){return en(e)([new Ve(new qc(t))])})(r))}},S0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new mn(t))])})(r))}},$0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new nn(t))])})(r))}},C0=function(t){return function(r){return we(xr(function(e){return en(e)([new uu(new Ie(t)),new uu(new Ae(t))])})(r))}},h0=function(t){return function(r){return we(xr(function(e){return en(e)([new Ve(new gv(t))])})(r))}},F0=function(t){return function(r){return we(xr(function(e){return en(e)([new Ve(new Sv(t))])})(r))}},T0=function(t){return function(r){return we(xr(function(e){return en(e)([new Ve(new Cv(t))])})(r))}},py=function(t){return{ids:function(){var e=Qr(t)(),n=oy(dv(fy)({newSeed:bv(e),size:5}));return we(xr(cy(1))(t))(),n},makeElement:$0,attributeParent:function(r){return function(e){return iy(void 0)}},makeRoot:g0,makeText:y0,makePursx:S0,setProp:k0,unsetAttribute:b0,makeDynBeacon:C0,setCb:function(r){return function(e){return iy(void 0)}},setText:D0,sendToPos:A0,deleteFromCache:T0,removeDynBeacon:d0,giveNewParent:h0,disconnectElement:F0}},Ra=function(t){return function(r){return t instanceof s?r(t.value0):m0(!1)}},x0=function(t){return function(r){return function(){var n=Ed(t.id)(r)(),u=xd(t.id)(r)(),f=Td(t.id)(r)(),l={scope:n,parent:u,dynFamily:f,id:t.id,pos:new s(t.pos),ez:!1};return vv(s.create)(Ra)(l)(r)()}}},ly=function(t){return{ids:function(){var e=Qr(t)(),n=oy(dv(fy)({newSeed:bv(e),size:5}));return we(xr(cy(1))(t))(),n},makeElement:Md(Ra)(!0),makeDynBeacon:Fd(Ra)(!0),attributeParent:hd(Ra),makeRoot:Nd,makeText:wd(Ra)(!0)(rr(void 0)),makePursx:Rd(Ra)(!0)(rr(void 0)),setProp:Id(!0),setCb:Ld(!0),unsetAttribute:Pd(!0),setText:Od,sendToPos:x0,deleteFromCache:sv,removeDynBeacon:Ud,giveNewParent:vv(s.create)(Ra),disconnectElement:Bd}};var hv=t=>t.replace(/[\u00A0-\u9999<>\&]/g,function(r){return"&#"+r.charCodeAt(0)+";"}),Fv=({id:t,html:r,pxScope:e,cache:n,verb:u})=>{let f=r,l=Object.entries(n);for(var _=0;_<l.length;_++){let O=l[_][0];l[_][1]===!0?f=f.replace(u+O+u,'data-deku-attr-internal="'+O+'" data-deku-ssr="'+O+"@!%"+e+'"'):f=f.replace(u+O+u,'<span style="display:contents;" data-deku-elt-internal="'+O+'" data-deku-ssr="'+O+"@!%"+e+'"></span>')}let v=f.indexOf(">"),k=f.indexOf("/>"),T=k==v-1?k:v;return f.slice(0,T)+' data-deku-ssr="'+t+'" '+f.slice(T)};var M0=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},vy=R(po),la=function(){function t(r,e){this.value0=r,this.value1=e}return t.create=function(r){return function(e){return new t(r,e)}},t}(),sy=function(t){var r=!1,e;function n(u){if(u.value1 instanceof dt)return r=!0,new s(new X(u.value1.value0,new la(u.value0,u.value1.value1)));if(u.value0 instanceof er&&u.value1 instanceof er)return r=!0,P.value;if(u.value1 instanceof er){t=new la(er.value,xf(u.value0));return}throw new Error("Failed pattern match at Data.CatQueue (line 92, column 1 - line 92, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},Jo=function(t){var r=!1,e;function n(u){if(u.value0 instanceof er&&u.value1 instanceof er)return r=!0,P.value;if(u.value0 instanceof er){t=new la(xf(u.value1),er.value);return}if(u.value0 instanceof dt)return r=!0,new s(new X(u.value0.value0,new la(u.value0.value1,u.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[u.constructor.name])}for(;!r;)e=n(t);return e},gr=function(t){return function(r){return new la(t.value0,new dt(r,t.value1))}};var zc={map:function(t){return function(r){return new la(vy(t)(r.value0),vy(t)(r.value1))}}},Xo={foldMap:function(t){return fp(Xo)(t)},foldr:function(t){return cp(Xo)(t)},foldl:function(t){var r=function(e){return function(n){var u=e,f=!1,l;function _(v,k){var T=Jo(k);if(T instanceof s){u=t(v)(T.value0.value0),n=T.value0.value1;return}if(T instanceof P)return f=!0,v;throw new Error("Failed pattern match at Data.CatQueue (line 147, column 16 - line 149, column 22): "+[T.constructor.name])}for(;!f;)l=_(u,n);return l}};return r}},Tv=ar(Xo),xv={append:Tv(gr)},Fe=function(){return new la(er.value,er.value)}(),my={mempty:Fe,Semigroup0:function(){return xv}},by=gr(Fe),Dy=function(t){var r=Ar(t)(my);return function(e){return r(by)(e)}},Ev={traverse:function(t){var r=t.Apply0(),e=R(r.Functor0()),n=Xr(r),u=V(t);return function(f){var l=e(Tv(gr)(Fe)),_=Tv(function(v){var k=n(gr)(v);return function(T){return k(f(T))}})(u(Fe));return function(v){return l(_(v))}}},sequence:function(t){return xp(Ev)(t)},Functor0:function(){return zc},Foldable1:function(){return Xo}};var ky=function(t){return function(r){return new la(new dt(t,r.value0),r.value1)}},w0={Applicative0:function(){return Mv},Bind1:function(){return I0}},I0={bind:_r(Ar(Xo)(my)),Apply0:function(){return Ay(0)}},Mv={pure:by,Apply0:function(){return Ay(0)}},Ay=M0("applyCatQueue","Data.CatQueue",function(){return{apply:Ue(w0),Functor0:function(){return zc}}});var P0=function(t,r,e){var n=0,u;return function(f){if(n===2)return u;if(n===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+r+", line "+f+")",r,f);return n=1,u=e(),n=2,u}},Mi=at(Kr),gy=Tr(),Ov=R(Dr),O0=ef(za),R0=on(Dr),wv=ur(jo(_u)),Iv=vi(Wc(We)),Lv=Ku(xe),dy=Ze(zm),N0=qa(Va)(Nc(We)),Le=Ct(Pu(Nn)),Na=at(xv),B0=V(Mv),yy=R(zc),U0=Dy(wt),W0=on(Ju),H0=gt(de),Pv=_o(xe),q0=Du(Lf),Sy=Uc(We),z0=qe(Ev)(Sy),Ko=Je(Sy)(Ke),V0=lu(wt)(Gi),G0=Ar(wt)(Gi),j0=ar(pe);var X0=function(t){var r=function(e){return function(n){return function(u){return function(f){if(f instanceof P)return{acc:e,rest:[]};if(f instanceof s){if(f.value0.head instanceof Ie){var l=r([])(new s({id:f.value0.head.value0.id,e:f.value0.head.value0}))(f.value0.tail);return r(Mi(e)(l.acc))(n)(l.rest)}if(f.value0.head instanceof Ae){if(n instanceof s)return{acc:[{pos:n.value0.e.pos,elt:new ct({o:n.value0.e,a:e,c:f.value0.head.value0})}],rest:f.value0.tail};if(n instanceof P)return{acc:[],rest:[]};throw new Error("Failed pattern match at Deku.SSR (line 58, column 34 - line 66, column 41): "+[n.constructor.name])}var _=function(){if(f.value0.head instanceof nn||f.value0.head instanceof un||f.value0.head instanceof mn||f.value0.head instanceof Ie||f.value0.head instanceof Ae)return f.value0.head.value0.pos;if(f.value0.head instanceof bn)return P.value;if(f.value0.head instanceof hu)return P.value;if(f.value0.head instanceof Pn)return P.value;throw new Error("Failed pattern match at Deku.SSR (line 69, column 18 - line 77, column 33): "+[f.value0.head.constructor.name])}();return r(Mi(e)([{pos:_,elt:new pt(f.value0.head)}]))(n)(f.value0.tail)}throw new Error("Failed pattern match at Deku.SSR (line 52, column 40 - line 79, column 15): "+[f.constructor.name])}(Op(u))}}};return r([])(P.value)(t).acc},$y=P0("sortSortableDyns","Deku.SSR",function(){var t=Ov(function(e){if(e.elt instanceof pt)return e;if(e.elt instanceof ct)return{pos:e.pos,elt:new ct({o:e.elt.value0.o,c:e.elt.value0.c,a:$y(47)(e.elt.value0.a)})};throw new Error("Failed pattern match at Deku.SSR (line 44, column 5 - line 47, column 81): "+[e.elt.constructor.name])}),r=Sf(Pi(Mt(ba(me)))(function(e){return function(n){return n.pos}(gy(e))}));return function(e){return t(r(e))}}),J0=$y(41),Cy=function(t){return O0(R0(t)(function(r){return function(e){if(e instanceof pt)return[e.value0];if(e instanceof ct)return Mi([new Ie(e.value0.o)])(Mi(Cy(e.value0.a))([new Ae(e.value0.c)]));throw new Error("Failed pattern match at Deku.SSR (line 35, column 26 - line 38, column 33): "+[e.constructor.name])}(function(e){return e.elt}(gy(r)))}))},hy=function(t){return function(r){var e=function(m){return function(Q){return wv(Iv(function(ot){var Z={};for(var tr in ot)({}).hasOwnProperty.call(ot,tr)&&(Z[tr]=ot[tr]);return Z.idToActions=Lv(function(Bt){if(Bt instanceof s)return new s(dy(function(J){if(J instanceof bn){if(J.value0.key===Q)return P.value;if(Ur)return new s(new bn(J.value0))}return new s(J)})(Bt.value0));if(Bt instanceof P)return P.value;throw new Error("Failed pattern match at Deku.SSR (line 296, column 17 - line 307, column 37): "+[Bt.constructor.name])})(m)(ot.idToActions),Z}))}},n=function(m){return function(Q){return wv(Iv(function(ot){var Z={};for(var tr in ot)({}).hasOwnProperty.call(ot,tr)&&(Z[tr]=ot[tr]);return Z.idToActions=Lv(function(Bt){if(Bt instanceof s)return new s(Mi(Bt.value0)([Q]));if(Bt instanceof P)return new s([Q]);throw new Error("Failed pattern match at Deku.SSR (line 317, column 17 - line 319, column 45): "+[Bt.constructor.name])})(m)(ot.idToActions),Z}))}},u=ie("deku-root")(fo(function(m){return m instanceof Ve&&m.value0 instanceof qc?new s(m.value0.value0.id):P.value})(r)),f=function(m){return function(Q){return function(ot){return N0(wv(Iv(function(Z){var tr={};for(var Bt in Z)({}).hasOwnProperty.call(Z,Bt)&&(tr[Bt]=Z[Bt]);return tr.parentToChild=Lv(function(J){if(J instanceof s)return new s(Mi(J.value0)([Q]));if(J instanceof P)return new s([Q]);throw new Error("Failed pattern match at Deku.SSR (line 283, column 19 - line 285, column 43): "+[J.constructor.name])})(m)(Z.parentToChild),tr})))(function(){return n(Q)(ot)})}}},l=function(m){var Q=function(it){return function(G){return function(B){if(B instanceof nn){var bt=B.value0.id===it||Le(B.value0.dynFamily)(new s(B.value0.id));return bt?new nn({id:B.value0.id,scope:B.value0.scope,parent:B.value0.parent,tag:B.value0.tag,pos:new s(G),dynFamily:B.value0.dynFamily}):B}if(B instanceof un){var _t=B.value0.id===it||Le(B.value0.dynFamily)(new s(B.value0.id));return _t?new un({id:B.value0.id,pos:new s(G),scope:B.value0.scope,parent:B.value0.parent,dynFamily:B.value0.dynFamily}):B}if(B instanceof mn){var Nr=B.value0.id===it||Le(B.value0.dynFamily)(new s(B.value0.id));return Nr?new mn({id:B.value0.id,parent:B.value0.parent,html:B.value0.html,scope:B.value0.scope,pos:new s(G),pxScope:B.value0.pxScope,verb:B.value0.verb,cache:B.value0.cache,dynFamily:B.value0.dynFamily}):B}if(B instanceof Ie){var On=B.value0.id===it||Le(B.value0.dynFamily)(new s(B.value0.id));return On?new Ie({id:B.value0.id,parent:B.value0.parent,pos:new s(G),scope:B.value0.scope,dynFamily:B.value0.dynFamily}):B}if(B instanceof Ae){var Fu=B.value0.id===it||Le(B.value0.dynFamily)(new s(B.value0.id));return Fu?new Ae({id:B.value0.id,parent:B.value0.parent,pos:new s(G),scope:B.value0.scope,dynFamily:B.value0.dynFamily}):B}if(B instanceof Pn||B instanceof bn||B instanceof hu)return B;throw new Error("Failed pattern match at Deku.SSR (line 201, column 24 - line 224, column 36): "+[B.constructor.name])}}},ot=function(it){return function(G){if(G instanceof nn){var B=G.value0.id===it||Le(G.value0.dynFamily)(new s(G.value0.id));return B?new nn({id:G.value0.id,scope:G.value0.scope,parent:P.value,tag:G.value0.tag,pos:G.value0.pos,dynFamily:G.value0.dynFamily}):G}if(G instanceof un){var bt=G.value0.id===it||Le(G.value0.dynFamily)(new s(G.value0.id));return bt?new un({id:G.value0.id,pos:G.value0.pos,scope:G.value0.scope,parent:P.value,dynFamily:G.value0.dynFamily}):G}if(G instanceof mn){var _t=G.value0.id===it||Le(G.value0.dynFamily)(new s(G.value0.id));return _t?new mn({id:G.value0.id,parent:P.value,html:G.value0.html,scope:G.value0.scope,pos:G.value0.pos,pxScope:G.value0.pxScope,verb:G.value0.verb,cache:G.value0.cache,dynFamily:G.value0.dynFamily}):G}if(G instanceof Ie){var Nr=G.value0.id===it||Le(G.value0.dynFamily)(new s(G.value0.id));return Nr?new Ie({id:G.value0.id,parent:P.value,pos:G.value0.pos,scope:G.value0.scope,dynFamily:G.value0.dynFamily}):G}if(G instanceof Ae){var On=G.value0.id===it||Le(G.value0.dynFamily)(new s(G.value0.id));return On?new Ae({id:G.value0.id,parent:P.value,pos:G.value0.pos,scope:G.value0.scope,dynFamily:G.value0.dynFamily}):G}if(G instanceof Pn||G instanceof bn||G instanceof hu)return G;throw new Error("Failed pattern match at Deku.SSR (line 225, column 24 - line 248, column 36): "+[G.constructor.name])}},Z=function(it){return function(G){return function(B){return function(bt){return function(_t){if(_t instanceof s&&_t.value0.value0 instanceof Ie){if(Le(_t.value0.value0.value0.dynFamily)(new s(B.id)))return Z(gr(Na(it)(G))(_t.value0.value0))(Fe)(B)(_t.value0.value1);if(Ur)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1)}if(_t instanceof s&&_t.value0.value0 instanceof Ae){if(Le(_t.value0.value0.value0.dynFamily)(new s(B.id)))return Z(gr(Na(it)(G))(_t.value0.value0))(Fe)(B)(_t.value0.value1);if(Ur)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1)}if(_t instanceof s&&_t.value0.value0 instanceof un){if(Le(_t.value0.value0.value0.dynFamily)(new s(B.id)))return Z(gr(Na(it)(G))(_t.value0.value0))(Fe)(B)(_t.value0.value1);if(Ur)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1)}if(_t instanceof s&&_t.value0.value0 instanceof mn){if(Le(_t.value0.value0.value0.dynFamily)(new s(B.id)))return Z(gr(Na(it)(G))(_t.value0.value0))(Fe)(B)(_t.value0.value1);if(Ur)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1)}if(_t instanceof s&&_t.value0.value0 instanceof nn){if(Le(_t.value0.value0.value0.dynFamily)(new s(B.id)))return Z(gr(Na(it)(G))(_t.value0.value0))(Fe)(B)(_t.value0.value1);if(Ur)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1)}if(_t instanceof s&&_t.value0.value0 instanceof bn)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1);if(_t instanceof s&&_t.value0.value0 instanceof hu)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1);if(_t instanceof s&&_t.value0.value0 instanceof Pn)return Z(it)(gr(G)(_t.value0.value0))(B)(_t.value0.value1);if(_t instanceof P)return Na(it)(Na(B0(new Ae({id:B.id+"%-%",parent:B.parent,pos:B.pos,scope:B.scope,dynFamily:B.dynFamily})))(G));throw new Error("Failed pattern match at Deku.SSR (line 123, column 63 - line 178, column 20): "+[_t.constructor.name])}(Jo(bt))}}}},tr=function(it){return function(G){return function(B){if(B instanceof s&&B.value0.value0 instanceof Ae)return tr(Z(Fe)(Fe)(B.value0.value0.value0)(it))(B.value0.value1);if(B instanceof s)return tr(ky(B.value0.value0)(it))(B.value0.value1);if(B instanceof P)return it;throw new Error("Failed pattern match at Deku.SSR (line 110, column 45 - line 115, column 20): "+[B.constructor.name])}(sy(G))}},Bt=function(it){return function(G){return function(B){return function(bt){if(bt instanceof s&&bt.value0.value0 instanceof nn){var _t=bt.value0.value0.value0.id===G;return _t?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof un){var Nr=bt.value0.value0.value0.id===G;return Nr?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof mn){var On=bt.value0.value0.value0.id===G;return On?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof Ie){var Fu=bt.value0.value0.value0.id===G;return Fu?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof Ae){var Ba=bt.value0.value0.value0.id===G;return Ba?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof bn){var Te=bt.value0.value0.value0.id===G;return Te?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof Pn){var _a=bt.value0.value0.value0.id===G;return _a?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof s&&bt.value0.value0 instanceof hu){var wi=bt.value0.value0.value0.id===G;return wi?Bt(it)(G)(bt.value0.value1):Bt(gr(it)(bt.value0.value0))(G)(bt.value0.value1)}if(bt instanceof P)return it;throw new Error("Failed pattern match at Deku.SSR (line 250, column 49 - line 275, column 20): "+[bt.constructor.name])}(Jo(B))}}},J=function(it){return function(G){return function(B){if(B instanceof s&&B.value0.value0 instanceof uu)return J(gr(it)(B.value0.value0.value0))(B.value0.value1);if(B instanceof s&&B.value0.value0 instanceof Ve&&B.value0.value0.value0 instanceof yv)return J(yy(Q(B.value0.value0.value0.value0.id)(B.value0.value0.value0.value0.pos))(it))(B.value0.value1);if(B instanceof s&&B.value0.value0 instanceof Ve&&B.value0.value0.value0 instanceof qc||B instanceof s&&B.value0.value0 instanceof Ve&&B.value0.value0.value0 instanceof gv)return J(it)(B.value0.value1);if(B instanceof s&&B.value0.value0 instanceof Ve&&B.value0.value0.value0 instanceof Sv)return J(yy(ot(B.value0.value0.value0.value0.id))(it))(B.value0.value1);if(B instanceof s&&B.value0.value0 instanceof Ve&&B.value0.value0.value0 instanceof $v)return J(Bt(Fe)(B.value0.value0.value0.value0.id)(it))(B.value0.value1);if(B instanceof s&&B.value0.value0 instanceof Ve&&B.value0.value0.value0 instanceof Cv)return J(Bt(Fe)(B.value0.value0.value0.value0.id)(it))(B.value0.value1);if(B instanceof P)return it;throw new Error("Failed pattern match at Deku.SSR (line 179, column 42 - line 200, column 20): "+[B.constructor.name])}(Jo(G))}},Cr=U0(m),qr=J(Fe)(Cr),Pe=tr(Fe)(qr);return Pe},_=l(r),v=function(m){return{parentToChild:W0(m.parentToChild)(function(){var Q=Ov(function(Z){if(Z instanceof nn||Z instanceof un||Z instanceof mn||Z instanceof Ie||Z instanceof Ae||Z instanceof bn||Z instanceof Pn||Z instanceof hu)return Z.value0.id;throw new Error("Failed pattern match at Deku.SSR (line 336, column 23 - line 344, column 52): "+[Z.constructor.name])}),ot=Ov(function(Z){return H0(Pv(Z)(m.idToActions))(Np)});return function(Z){return Q(Cy(J0(X0(q0(ot(Z))))))}}()),idToActions:m.idToActions}}(Kd(z0(function(m){if(m instanceof nn)return Ko(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof un)return Ko(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof mn)return Ko(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof Ie)return Ko(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof Ae)return Ko(m.value0.parent)(function(Q){return f(Q)(m.value0.id)(m)});if(m instanceof bn||m instanceof Pn)return n(m.value0.id)(m);if(m instanceof hu)return e(m.value0.id)(m.value0.key);throw new Error("Failed pattern match at Deku.SSR (line 352, column 19 - line 364, column 61): "+[m.constructor.name])})(_))({parentToChild:bu,idToActions:bu})),k=function(m){return Ha(Up(function(Q){return Q instanceof nn||Q instanceof un||Q instanceof Ie||Q instanceof Ae})(m))},T=function(m){return ie("")(fo(function(Q){return Q instanceof nn?new s(Q.value0.tag):P.value})(m))},O=function(m){return V0(" ")(dy(function(Q){return Q instanceof bn?new s(Q.value0.key+('="'+(Q.value0.value+'"'))):P.value})(m))},H=function(m){return rr("")(function(Q){var ot=function(Cr){return ie("")(fo(function(qr){return qr instanceof Pn?new s(hv(qr.value0.text)+("<!--"+(m+"-->"))):new s("<!--"+(m+"-->"))})(Q))},Z=function(Cr){return"<!--%-%"+(m+"-->")},tr=function(Cr){var qr=T(Q),Pe=O(Q);return"<"+(qr+(" "+(Pe+(' data-deku-ssr="'+(m+('">'+(W(m)+("</"+(qr+">")))))))))},Bt=function(Cr){return"<!--%-%"+(m+"-->")},J=Hu(Q)(0);return J instanceof s&&J.value0 instanceof Pn?ot(void 0):J instanceof s&&J.value0 instanceof un?ot(void 0):J instanceof s&&J.value0 instanceof Ie?Z(void 0):J instanceof s&&J.value0 instanceof Ae?Bt(void 0):J instanceof s&&J.value0 instanceof mn?Fv(J.value0.value0):tr(void 0)})(Pv(m)(v.idToActions))},W=function(m){var Q=ie([])(Pv(m)(v.parentToChild));return G0(H)(Q)},p=function(m){return j0(function(Q){return function(ot){var Z=k(ot);if(Z)return Q;if(!Z)return Ac("data-deku-ssr")(O(ot)+" data-deku-ssr")(Q);throw new Error("Failed pattern match at Deku.SSR (line 386, column 17 - line 390, column 14): "+[Z.constructor.name])}})(W(m))(v.idToActions)};return"<"+(t+(' data-deku-ssr="deku-root" data-deku-root="'+(u+('">'+(p(u)+("</"+(t+">")))))))}};var II=on(z),LI=ei(ri);var PI=ur(z),Fy=Tr(),OI=Ct(ra),RI=d(),NI=Ht($r),BI=V(Yt),Ty=V(Sr),UI=R(fe),WI=ur(fe);var xy=function(t){return function(r){return function(e){return vn({doLogic:function(n){return function(u){return function(f){return u.sendToPos({id:f,pos:n})}}},ids:function(n){return function(u){return u.ids}(Fy(n))},disconnectElement:function(n){return function(u){return n.disconnectElement({id:u.id,scope:u.scope,parent:u.parent,scopeEq:OI})}},toElt:function(n){return n}})(t)(r)(RI(e))}}},HI=function(t){return function(){var e=_v();lv(e)();var n=II(LI(oe(0)))(ly)();cv(e)();var u=fv(),f=ul(NI(BI(Fy(n).makeRoot({id:"deku-root",root:u})))(xy({parent:new s("deku-root"),scope:new ta("rootScope"),raiseId:function(l){return Ty(void 0)},ez:!0,pos:P.value,dynFamily:P.value})(n)(t)))(function(l){return l(e)})();return pv(e)(),f}},Ey=function(t){return PI(HI(t))},qI=function(t){var r=function(e){return UI(hy(t))(function(){var u=oe(0)(),f=oe([])(),l=py(u);return WI(sb(xy({parent:new s("deku-root"),scope:new ta("rootScope"),raiseId:function(_){return Ty(void 0)},ez:!0,pos:P.value,dynFamily:P.value})(l)(e))(function(_){return _(f)}))(),Qr(f)()})};return r},My=qI("body");var zI=Pc(aa),Rv=Ht($r),Vc=V(Yt),Iy=R(Er),Ly=at(wu),VI=Dt(kn),GI=Qu(De),jI=Dt(Hi),Qo=ve(),XI=Gr({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <p>One important thing to note about SSR is that it leaves a lot of things out. For example, it will not respond to send-to-position requests if they are emitted immediately. These are only evaluated on the client once a document is rendered. For this reason, it is recommended to <i>only</i> use SSR for elements that should be statically rendered, like a loading screen or blog. If you need your initial HTML to reflect lots of inserting and deleting of dynamic nodes, deku SSR may not work for you yet.</p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Qo(Qo(Qo(Qo(Qo(Vr)({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}}))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}}))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}}))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}}))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})),JI=gt(Uu),Py=at(Gs(wu)),Nv=V(Sr),KI=function(){return nt.value}(),Oy=function(){return Kf()(fi({reflectSymbol:function(){return"buttonClicked"}})()()(fi({reflectSymbol:function(){return"sliderMoved"}})()()(Wf)()())()())(nt.value)(function(t){return function(r){return br([K_([D(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),he(zI(t.buttonClicked(void 0)))([D("Click")]),br([tn(Rv(Vc("Val: 0"))(Iy(function(){var e=Ly("Val: ");return function(n){return e(VI(n))}}())(GI(function(e){return function(n){return 1+e|0}})(-1)(Rv(Vc(void 0))(r.buttonClicked)))))]),br([Oa(Lc(Vc(t.sliderMoved)))([]),br([tn(Rv(Vc("Val: 50"))(Iy(function(){var e=Ly("Val: ");return function(n){return e(jI(n))}}())(r.sliderMoved)))])])])}})}(),Ry=function(t){return XI(KI)({code2:Rr([Or([D(o_)])]),code1:Rr([Or([D(i_)])]),code0:Rr([Or([D(a_)])]),result:Oy,codegen:Rr([Or([tn(vb(function(r){return function(){return JI(Py(Nv('<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>'))(Py(My(Oy))(Nv("</html>"))))(r)(),Nv(void 0)}}))])])})};var YI=Be(Ee),ZI=Ht($r),Bv=V(Yt),tL=R(Dr),rL=Lr(wt)(b),eL=Rt(Zr),nL=kr(Pr),uL=Rt(vD),aL=Rt(Yr),iL=Rt(Di),Ny=function(t){return mi(function(r){return YI(function(e){return ZI(Bv(t.startsWith))(e)})(function(e){var n=function(f){if(f instanceof ec)return _d;if(f instanceof ki)return pd;if(f instanceof Ai)return ZD;if(f instanceof di)return dd;if(f instanceof gi)return QA;if(f instanceof Si)return TA;if(f instanceof yi)return Cd;if(f instanceof $i)return od;if(f instanceof Ci)return Dd;if(f instanceof hi)return Ry;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 33, column 7 - line 33, column 34): "+[f.constructor.name])},u=function(f){return function(l){return n(l)({dpage:f,slug:t.slug})}};return br([br(tL(function(f){return ho([Co(rL(Bv)([eL(yr.value)(dr(function(l){return nL(jr(l))(r(f.value0))})),uL(ke.value)("cursor:pointer;"),aL(Hr.value)(t.slug+f.value1.value1.value0)]))([D(f.value1.value0)]),oa(Bv(iL(ke.value)(function(){return f.value1.value1.value1?"":"display:none;"}())))([D(" | ")])])})([new X(ec.value,new X("Home",new X("",!0))),new X(ki.value,new X("Hello world",new X("hello/",!0))),new X(Ai.value,new X("Component",new X("simple/",!0))),new X(di.value,new X("Pursx 1",new X("pursx1/",!0))),new X(gi.value,new X("Events 1",new X("events1/",!0))),new X(Si.value,new X("Effects",new X("effects/",!0))),new X(yi.value,new X("Pursx 2",new X("pursx2/",!0))),new X($i.value,new X("Events 2",new X("events2/",!0))),new X(Ci.value,new X("Portals",new X("portals/",!0))),new X(hi.value,new X("SSR",new X("ssr/",!1)))])),Zf(u(r))(e)])})})};var fL=Dt(cs()()(ps({reflectSymbol:function(){return"slug"}})(ls({reflectSymbol:function(){return"startsWith"}})(je))(je))),cL=V(ge),z5t=function(t){return function(){var e=rr(Eo(Ti("could not ingest options: "+fL(t))))(cL)(WD(t.startsWith))();return Ey(Ny({slug:t.slug,startsWith:e}))()}};export{z5t as main};
